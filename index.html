<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Weighing System 2.0</title>
		<link rel="stylesheet" href="css/bootstrap.css" />			
		<link rel="stylesheet" href="css/bootstrap-dialog.css" />	
		<link rel="stylesheet" href="css/bootstrap-login.css" />	
		<link rel="stylesheet" href="css/font-awesome.min.css" />
	</head>
	<body class="login-page">
		<div class="container">		
			<div class="row" id="pwd-container">
				<div class="col-md-5 col-centered">
					<section class="login-form" role="login">							
						<img src="images/vendor-logo.gif" class="img-responsive" alt="" />							
						<div class="form-group">
							<div class="input-group">
								<span class="input-group-addon">
									<i class="fa fa-user"></i>
								</span> 
								<input class="form-control input-lg" placeholder="Login" id="username" type="text" autofocus>
							</div>
						</div>
						<div class="form-group">
							<div class="input-group">
								<span class="input-group-addon">
									<i class="fa fa-lock"></i>
								</span> 
								<input class="form-control input-lg" placeholder="Password" id="password" type="password" autofocus>
							</div>
						</div>
						<button type="button" name="go" class="btn btn-lg btn-primary btn-block" id="loginbtn"><i class="fa fa-sign-in"></i> Login</button>	
						<div style="border-top: 1px solid #888; margin: 30px 0 5px 0; padding-top: 20px; font-size: 85%">
							<div style="font-weight: bold">Scaletech International Corporation</div>
							<div>3050 F. Bautista St. Bo. Ugong, Valenzuela City</div>
							<div>Phone: 983-7895/96, Fax: 444-0592</div>
							<div>Email: scaletech_intl_corp@lycos.com</div>
						</div>
					</section>  
				</div>
			</div>
		</div>
		<script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery-widget.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/bootstrap-dialog.min.js"></script>
		<script type="text/javascript" src="js/stic-constants.js"></script>
		<script type="text/javascript" src="js/stic-functions.js"></script>		
		<script type="text/javascript">
			$(function () { 
				console.log('Cookies Before Login: ' + document.cookie);
			
				// Check Cookies				
				if (readCookie('userid') !== null) {
					window.location = DEFAULT_ROOT + 'main.html';
				}
				
				// Login Button action
				$("#loginbtn").click(function() {
					var username = $('#username').val();
					var password = $('#password').val();
					if (username == '' || password == '') {	
						$('#username').val('');
						$('#password').val('');
						BootstrapDialog.alert({
							title: MSG_ERROR_TITLE,
							message: 'Username or Password must not be empty!',
							type: BootstrapDialog.TYPE_DANGER
						});
					} else {
						$.ajax({
							type: 'POST',
							url: '/scaletech/services/UserInfoServices/getUserByNamePassList',
							data: {
								user_name: username,
								user_password: password
							},
							success: function(oXml, textStatus, jqXHR) {
								var sData = getXMLData(oXml, 'type'); 
								if (sData === 'SUCCESS') {
									createCookie('username', username, 1);
									createCookie('userid', getXMLData(oXml, 'user_id'), 1);
									createCookie('roleid', getXMLData(oXml, 'role_id'), 1);
									window.location = DEFAULT_ROOT + 'main.html';
								};
								if (sData === 'FAILED') {									
									$('#username').val('');
									$('#password').val('');
									BootstrapDialog.alert({
										title: MSG_ERROR_TITLE,
										message: 'Invalid Credentials! Please try again!',
										type: BootstrapDialog.TYPE_DANGER
									});
								} else {
									//alert(oXml);
								};
							},
							error: function(jqXHR, textStatus, errorThrown) {
								console.log('jqXHR: ' + jqXHR + ', textStatus: ' + textStatus + ', errorThrown: ' + errorThrown);
							}					
						});
					}					
				});
			});
		</script>
	</body>
</html>