<div class="panel panel-primary" style="width: 990px !important; margin-left: auto; margin-right: auto">
	<div class="panel-heading" style="text-align: left">
		<i class="fa fa-balance-scale"></i> Weighing
	</div>
	<div class="panel-body">
		<div class="row">
			<div class="weight-lcd">
				<div id="weight-reading" class="weight-reading">+0.00</div>
				<div class="weight-info">
					<div id="weight-unit" class="weight-unit">kg</div>
					<div id="weight-status"class="weight-status">inactive</div>
				</div>
				<div class="weight-stage">
					<div class="txt1"><img src="images/numeric-0-box-outline.png"></div>
				</div>
			</div>
		</div>
		<hr>
		<div class="container well no-margin-bottom no-margin-right" style="width: auto; padding: 10px">
			<div class="form-horizontal no-margin-bottom" style="width: 750px; float: left;" id="weight-scale-form">
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="truck_code" class="col-sm-2 control-label" style="width: 130px">Truck</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-primary" id="new-truck-data"
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-plus"></i> <strong>New Truck Data</strong>' 
							data-content="Click to create new truck data for First Weighing."><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-primary" id="search-truck-data"
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-truck"></i> <strong>Truck Data Lookup</strong>' 
							data-content="Click to search for truck data that are already available for First and Second Weighing."><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="truck_code" data-type="varchar" data-stage="first" placeholder="Truck Code" readonly>
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="cust_code" class="col-sm-2 control-label" style="width: 130px">Customer</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-primary" id="new-customer-data" disabled
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-plus"></i> <strong>New Customer Data</strong>' 
							data-content="Click to create new customer data for Second Weighing."><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-primary" id="search-customer-data" disabled
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-users"></i> <strong>Customer Data Lookup</strong>' 
							data-content="Click to search for customer data that are already available for Second Weighing."><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="cust_code" data-type="varchar" data-stage="second" placeholder="Customer Code" readonly>
					</div>
					<div class="btn-group" role="group" style="width: 365px">
						<input type="text" class="form-control" id="cust_name" data-type="varchar" data-stage="second" placeholder="Customer Name" readonly>
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="dest_zipcode" class="col-sm-2 control-label" style="width: 130px">Destination</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-primary" id="new-destination-data" disabled
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-map-marker"></i> <strong>Add Destination Lookup</strong>' 
							data-content="Click to add destination data that are already available in the system to the selected customer data."><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-primary" id="search-destination-data" disabled
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-map-marker"></i> <strong>Destination Data Lookup</strong>' 
							data-content="Click to search for destination data that are already tagged to the selected customer data."><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="dest_zipcode" data-type="varchar" data-stage="second" placeholder="Zip Code" readonly>
					</div>
					<div class="btn-group" role="group" style="width: 365px">
						<input type="text" class="form-control" id="dest_location" data-type="varchar" data-stage="second" placeholder="Location" readonly>
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="prod_code" class="col-sm-2 control-label" style="width: 130px">Product</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-primary" id="new-product-data" disabled
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-plus"></i> <strong>New Product Data</strong>' 
							data-content="Click to create new product data for Second Weighing. This will be tagged automatically to the selected customer data."><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-primary" id="search-product-data" disabled
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-product-hunt"></i> <strong>Product Data Lookup</strong>' 
							data-content="Click to search for product data that are already available in the system or tagged to the selected customer data."><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="prod_code" data-type="varchar" data-stage="second" placeholder="Product Code" readonly>
					</div>
					<div class="btn-group" role="group" style="width: 365px">
						<input type="text" class="form-control" id="prod_name" data-type="varchar" data-stage="second" placeholder="Product Name" readonly>
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="supp_code" class="col-sm-2 control-label" style="width: 130px">Supplier</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-primary" id="new-supplier-data" disabled
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-plus"></i> <strong>New Supplier Data</strong>' 
							data-content="Click to create new supplier data for Second Weighing."><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-primary" id="search-supplier-data" disabled
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-users"></i> <strong>Supplier Data Lookup</strong>' 
							data-content="Click to search for supplier data that are already available for Second Weighing."><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="supp_code" data-type="varchar" data-stage="second" placeholder="Supplier Code" readonly>
					</div>
					<div class="btn-group" role="group" style="width: 365px">
						<input type="text" class="form-control" id="supp_name" data-type="varchar" data-stage="second" placeholder="Supplier Name" readonly>
					</div>
				</div>
				<div style="margin: 10px 15px 15px 0px; border-top: 1px solid #CCC"></div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="user_name" class="col-sm-2 control-label" style="width: 130px">User</label>
					</div>
					<div class="btn-group" role="group">
						<input type="text" class="form-control" id="user_name" style="width: 120px" readonly>
					</div>
					<div class="btn-group" role="group">
						<label for="unit_price" class="col-sm-2 control-label" style="width:100px; text-align:right">Unit Price</label>
					</div>
					<div class="btn-group" role="group">
						<input type="text" class="form-control" id="unit_price" style="width: 125px" value="0.00" data-type="float" data-stage="second" data-action="enable" readonly>
					</div>
					<div class="btn-group" role="group">
						<label for="total_price" class="col-sm-2 control-label" style="width:110px; text-align:right">Total Price</label>
					</div>
					<div class="btn-group" role="group">
						<input type="text" class="form-control weight-input" id="total_price" style="width: 125px" value="0.00" data-type="float" data-stage="second" readonly
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="bottom"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-calculator"></i> <strong>Total Price</strong>' 
							data-content="Total Price = Unit Price x Net Weight">
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="remarks" class="col-sm-2 control-label" style="width: 130px">Remarks</label>
					</div>
					<div class="btn-group" role="group" style="width: 600px">
						<input type="text" class="form-control" id="remarks" placeholder="Enter Remarks" data-type="varchar" data-stage="second" data-action="enable" readonly>
					</div>
				</div>
				<div style="margin: 10px 15px 8px 0px; border-top: 1px solid #CCC"></div>
				<div class="form-group no-margin-bottom">
					<div class="col-sm-2 no-padding-left" style="margin-left: 20px; width: 175px">
						<label for="weight_in_reading" class="control-label">Truck In Weight</label>
						<input type="text" class="form-control weight-input" id="weight_in_reading" value="0.00" data-type="float" data-stage="first" readonly
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="top"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-tag"></i> <strong>Truck In Weight</strong>' 
							data-content="Weight reading for First Weighing.">
					</div>
					<div class="col-sm-2 no-padding-left" style="width: 175px">
						<label for="weight_out_reading" class="control-label">Truck Out Weight</label>
						<input type="text" class="form-control weight-input" id="weight_out_reading" value="0.00" data-type="float" data-stage="second" readonly
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="top"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-tags"></i> <strong>Truck Out Weight</strong>' 
							data-content="Weight reading for Second Weighing.">
					</div>
					<div class="col-sm-2 no-padding-left" style="width: 175px">
						<label for="compensation" class="control-label">Compensation(%)</label>
						<input type="text" class="form-control col-sm-1" id="compensation" value="0.00" data-type="float" data-stage="second" data-action="enable" readonly>
					</div>
					<div class="col-sm-2 no-padding-left" style="width: 175px">
						<label for="net_weight" class="control-label">Net Weight</label>
						<input type="text" class="form-control weight-input" id="net_weight" value="0.00" data-type="float" data-stage="second" readonly
							data-toggle="popover" 
							data-trigger="hover"
							data-placement="top"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-calculator"></i> <strong>Net Weight</strong>' 
							data-content="Net Weight = Gross Weight - Tare Weight<br>Final Net Weight = Net Weight - (Net Weight x (Compensation / 100))">
					</div>
				</div>
			</div>
			<div class="form-horizontal no-margin-bottom" style="width: 180px; float: right;">
				<button id="first-weighing" class="btn btn-primary btn-lg" data-type="button" disabled
					data-toggle="popover" 
					data-trigger="hover"
					data-placement="left"
					data-container="body"
					data-html="true"
					title='<i class="fa fa-tag"></i> <strong>First Weighing</strong>' 
					data-content="Click to save First Weighing details into the system.">
					<i class="fa fa-tag fa-3x"></i>
					<p>First Weighing</p>
				</button>
				<button id="second-weighing" class="btn btn-primary btn-lg" data-type="button" disabled
					data-toggle="popover" 
					data-trigger="hover"
					data-placement="left"
					data-container="body"
					data-html="true"
					title='<i class="fa fa-tags"></i> <strong>Second Weighing</strong>' 
					data-content="Click to save Second Weighing details into the system.">
					<i class="fa fa-tags fa-3x"></i>
					<p>Second Weighing</p>
				</button>
				<button id="cancel-weighing" class="btn btn-danger btn-lg" data-type="button" disabled
					data-toggle="popover" 
					data-trigger="hover"
					data-placement="left"
					data-container="body"
					data-html="true"
					title='<i class="fa fa-ban"></i> <strong>Cancel</strong>' 
					data-content="Click to clear and reset the Weighing Scale form.">
					<i class="fa fa-ban fa-3x"></i>
					<p>Cancel</p>
				</button>
				<button id="reprint-docket" class="btn btn-primary btn-lg no-margin-bottom" data-type="button" disabled
					data-toggle="popover" 
					data-trigger="hover"
					data-placement="left"
					data-container="body"
					data-html="true"
					title='<i class="glyphicon glyphicon-print"></i> <strong>Reprint Docket</strong>' 
					data-content="Click to reprint docket details for First Weighing.">
					<i class="glyphicon glyphicon-print fa-3x"></i>
					<p>Reprint Docket</p>
				</button>
			</div>
		</div>
	</div>
</div>
<input type="hidden" data-stage="second" id="wr_id">
<input type="hidden" data-stage="second" id="cust_id">
<input type="hidden" data-stage="second" id="dest_id">
<input type="hidden" data-stage="second" id="prod_id">
<input type="hidden" data-stage="second" id="supp_id">
<input type="hidden" data-stage="second" id="docket_no">
<div class="modal fade bootstrap-dialog type-primary" id="truck-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-truck"></i> Truck Data Lookup
			</div>
			<div class="modal-body">
				<ul class="nav nav-tabs" role="tablist" style="margin-bottom: 15px;" id="tabSelectTruck">
					<li role="presentation" class="active">
						<a href="#firstWeighing" aria-controls="firstWeighing" role="tab" data-toggle="tab">
							<i class="fa fa-tag"></i> First Weighing
						</a>
					</li>
					<li role="presentation">
						<a href="#secondWeighing" aria-controls="secondWeighing" role="tab" data-toggle="tab">
							<i class="fa fa-tags"></i> Second Weighing
						</a>
					</li>
				</ul>
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="firstWeighing">
						<div class="alert alert-info" role="alert">
							<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
							<ul>
								<li><i class="fa fa-check-square-o"></i> Records listed here are Truck Codes available for First Weighing only.</li>
								<li><i class="fa fa-check-square-o"></i> To create new Truck Code for First Weighing, use the Weighing Scale form.</li>
							</ul>
						</div>
						<div class="panel panel-default no-margin-bottom">
							<div class="panel-body">
								<table class="display compact" id="table-truck-first" style="width: 100%">
									<thead>
										<tr>
											<th class="text-left">Truck ID</th>
											<th class="text-left">Truck Code</th>
											<th class="text-left">Date Modified</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary btnFWTrucksCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary" id="btnFWTrucksOK" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="secondWeighing">
						<div class="alert alert-info" role="alert">
							<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
							<ul>
								<li><i class="fa fa-check-square-o"></i> Records listed here are Truck Codes available for Second Weighing only.</li>
								<li><i class="fa fa-check-square-o"></i> To remove Truck Code from Second Weighing, go to the Truck In report page.</li>
							</ul>
						</div>
						<div class="panel panel-default no-margin-bottom">
							<div class="panel-body">
								<table class="display compact" id="table-truck-second" style="width: 100%">
									<thead>
										<tr>
											<th class="text-left">ID</th>
											<th class="text-left">Truck Code</th>
											<th class="text-left">Date In</th>
											<th class="text-left">Time In</th>
											<th class="text-left">Weight In</th>
											<th class="text-left">Unit</th>
											<th class="text-left">User</th>
											<th class="text-left">Docket No.</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary btnSWTrucksCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary" id="btnSWTrucksOK" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="customer-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-users"></i> Customer Data Lookup
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
					<ul>
						<li><i class="fa fa-check-square-o"></i> Records listed here are Customer Data that are already available in the system.</li>
						<li><i class="fa fa-check-square-o"></i> To create new Customer Data, use the Weighing Scale form.</li>
					</ul>
				</div>
				<div class="panel panel-default no-margin-bottom">
					<div class="panel-body">
						<table class="display compact" id="table-customer-data" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">Customer ID</th>
									<th class="text-left">Customer Code</th>
									<th class="text-left">Customer Name</th>
									<th class="text-left">Date Modified</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="select-item" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="destination-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-map-marker"></i> Destination Data Lookup
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
					<ul>
						<li><i class="fa fa-check-square-o"></i> Records listed here are Destination Data that are already tagged to the selected Customer Data.</li>
						<li><i class="fa fa-check-square-o"></i> To tag other Destination Data to the selected Customer Data, use the Weighing Scale form.</li>
					</ul>
				</div>
				<div class="panel panel-default no-margin-bottom">
					<div class="panel-body">
						<table class="display compact" id="table-destination-data" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">CD ID</th>
									<th class="text-left">Customer ID</th>
									<th class="text-left">Destination ID</th>
									<th class="text-left">Zip Code</th>
									<th class="text-left">Name</th>
									<th class="text-left">Location</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="select-item" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="destination-data-all-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-map-marker"></i> Add Destination Lookup
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
					<ul>
						<li><i class="fa fa-check-square-o"></i> Records listed here are Destination Data that are not yet tagged to the selected Customer Data.</li>
						<li><i class="fa fa-check-square-o"></i> To tag Destination Data to the selected Customer Data, select a record below.</li>
					</ul>
				</div>
				<div class="panel panel-default no-margin-bottom">
					<div class="panel-body">
						<table class="display compact" id="table-destination-data-all" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">Destination ID</th>
									<th class="text-left">Zip Code</th>
									<th class="text-left">Name</th>
									<th class="text-left">Location</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="select-item" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="product-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-product-hunt"></i> Product Data Lookup
			</div>
			<div class="modal-body">
				<ul class="nav nav-tabs" role="tablist" style="margin-bottom: 15px;" id="tabSelectProduct">
					<li role="presentation" class="active">
						<a href="#products" aria-controls="products" role="tab" data-toggle="tab">
							<i class="fa fa-product-hunt"></i> Products
						</a>
					</li>
					<li role="presentation">
						<a href="#customerProducts" aria-controls="customerProducts" role="tab" data-toggle="tab">
							<i class="fa fa-user"></i> Customer Products
						</a>
					</li>
				</ul>
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="products">
						<div class="alert alert-info" role="alert">
							<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
							<ul>
								<li><i class="fa fa-check-square-o"></i> Records listed here are Product Data that are not yet tagged to the selected Customer Data.</li>
								<li><i class="fa fa-check-square-o"></i> To create new Product Data, use the Weighing Scale form.</li>
							</ul>
						</div>
						<div class="panel panel-default no-margin-bottom">
							<div class="panel-body">
								<table class="display compact" id="table-product-data-all" style="width: 100%">
									<thead>
										<tr>
											<th class="text-left">Product ID</th>
											<th class="text-left">Product Code</th>
											<th class="text-left">Product Name</th>
											<th class="text-left">Unit Price</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary btnAllProdCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary" id="btnAllProdOK" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="customerProducts">
						<div class="alert alert-info" role="alert">
							<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
							<ul>
								<li><i class="fa fa-check-square-o"></i> Records listed here are Product Data that are already tagged to the selected Customer Data.</li>
								<li><i class="fa fa-check-square-o"></i> To tag other Product Data to the selected Customer Data, go to the Products tab.</li>
							</ul>
						</div>
						<div class="panel panel-default no-margin-bottom">
							<div class="panel-body">
								<table class="display compact" id="table-product-data" style="width: 100%">
									<thead>
										<tr>
											<th class="text-left">CP ID</th>
											<th class="text-left">Customer ID</th>
											<th class="text-left">Product ID</th>
											<th class="text-left">Product Code</th>
											<th class="text-left">Product Name</th>
											<th class="text-left">Unit Price</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary btnCustProdCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary" id="btnCustProdOK" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="supplier-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-users"></i> Supplier Data Lookup
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
					<ul>
						<li><i class="fa fa-check-square-o"></i> Records listed here are Supplier Data that are already available in the system.</li>
						<li><i class="fa fa-check-square-o"></i> To create new Supplier Data, use the Weighing Scale form.</li>
					</ul>
				</div>
				<div class="panel panel-default no-margin-bottom">
					<div class="panel-body">
						<table class="display compact" id="table-supplier-data" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">Supplier ID</th>
									<th class="text-left">Supplier Code</th>
									<th class="text-left">Supplier Name</th>
									<th class="text-left">Date Modified</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="select-item" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript" src="js/stic-weight-scale.js"></script>
<script>
	$(function() {
		// Initialize DT variables
		var dtFWT, dtSWT, dtCDP, dtDDP, dtADDP, dtPDP, dtAPDP, dtSDP;
		
		// Load user based on cookie
		$('#user_name').val(STIC.User.ReadCookie('username'));
		
		// Initialize Popovers
		$('[data-toggle="popover"]').popover();
		toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });		

		/**********************************************************************************************************************************************/

		// Truck > New Truck Data
		$('#new-truck-data').on('click', function () {
			showNewModalForm({
				objectId: 'truckInfo',
				dataType: 'Truck Data',
				status: 'FIRST_WEIGHT_IN',
				formId: '#dataTruckForm',
				formSrc: FORM_TRUCK_DATA,
				wsInsert: WS_TRUCK_INSERT
			});
		});
		
		// Truck > Truck Data Lookup
		$('#search-truck-data').on('click', function () {
			// Destroy First Weight Trucks DT if initialized
			if ($.fn.DataTable.isDataTable('#table-truck-first')) {
				dtFWT.destroy();
			}

			// Destroy Second Weight Trucks DT if initialized
			if ($.fn.DataTable.isDataTable('#table-truck-second')) {
				dtSWT.destroy();
			}

			// Initialize First Weight Trucks DT
			dtFWT = initDT_Picker({
				domId: 'table-truck-first',
				ds: DS_TRUCK_LIST,
				cd: CD_TRUCK_LIST,
				ws: WS_TRUCK_LIST
			});

			// Initialize Second Weight Trucks DT
			dtSWT = initDT_Picker({
				domId: 'table-truck-second',
				ds: DEFAULT_DATASOURCE,
				cd: CD_TRUCK_IN_LIST,
				ws: WS_CHECK_TRUCK_CODE_LIST
			});

			// Show Truck Data Lookup
			$('#truck-data-modal').modal('show');
		});

		// Truck > Truck Data Lookup > onShow Event
		$('#truck-data-modal').on('shown.bs.modal', function () {
			$('#btnFWTrucksOK, #btnSWTrucksOK').prop('disabled', true);
			$('#tabSelectTruck a[href="#firstWeighing"]').tab('show');
		})

		// Truck > Truck Data Lookup > First Weighing Tab Click Event
		$('#tabSelectTruck a[href="#firstWeighing"]').on('click', function () {
			dtFWT.ajax.reload();
			$('#btnFWTrucksOK').prop('disabled', true);
		});

		// Truck > Truck Data Lookup > Second Weighing Tab Click Event
		$('#tabSelectTruck a[href="#secondWeighing"]').on('click', function () {
			dtSWT.ajax.reload();
			$('#btnSWTrucksOK').prop('disabled', true);
		});

		// Truck > Truck Data Lookup > First Weighing Trucks > DT Row Click Event
		$('#table-truck-first tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtFWT,
				pid: 'truck_id',
				buttons: ['#btnFWTrucksOK']
			});
		});

		// Truck > Truck Data Lookup > Second Weighing Trucks > DT Row Click Event
		$('#table-truck-second tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtSWT,
				pid: 'truck_id',
				buttons: ['#btnSWTrucksOK']
			});
		});

		// Truck > Truck Data Lookup > First Weighing Trucks > Select Item
		$('#truck-data-modal #btnFWTrucksOK').on('click', function () {			
			toggleWeightScaleFields({ status: 'FIRST_WEIGHT_IN' });			
			$('#truck_code').val(dtFWT.row('.selected').data().truck_code);			
			$('#truck-data-modal').modal('hide');		
			setNetWeight();
		});

		// Truck > Truck Data Lookup > Second Weighing Trucks > Select Item
		$('#truck-data-modal #btnSWTrucksOK').on('click', function () {
			var selected_row = dtSWT.row('.selected');
			toggleWeightScaleFields({ status: 'SECOND_WEIGHT_IN' });
			$('#wr_id').val(selected_row.data().wr_id);
			$('#docket_no').val(selected_row.data().docket_no);
			$('#truck_code').val(selected_row.data().truck_code);
			$('#weight_unit').text(selected_row.data().weight_unit);
			$('#weight_in_reading').val(selected_row.data().weight_in_reading
				.replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
			$('#truck-data-modal').modal('hide');
			setNetWeight();
		});

		// Truck > Truck Data Lookup > Cancel
		$('.btnFWTrucksCancel, .btnSWTrucksCancel').on('click', function () {
			$('#truck-data-modal').modal('hide');
			$('#btnFWTrucksOK, #btnSWTrucksOK').prop('disabled', true);
		});

		/**********************************************************************************************************************************************/

		// Customer > New Customer Data
		$('#new-customer-data').on('click', function () {		
			showNewModalForm({
				objectId: 'custInfo',
				dataType: 'Customer Data',
				status: 'SECOND_WEIGHT_IN',
				formId: '#dataCustomerForm',
				formSrc: FORM_CUSTOMER_DATA,
				wsInsert: WS_CUSTOMER_INSERT
			});
		});
		
		// Customer > Customer Data Lookup
		$('#search-customer-data').on('click', function () {	
			if ($('#truck_code').val() != '') {

				// Destroy Customers DT if initialized
				if ($.fn.DataTable.isDataTable('#table-customer-data')) {
					dtCDP.destroy();
				}

				// Initialize Customers DT
				dtCDP = initDT_Picker({
					ds: DS_CUSTOMER_LIST,
					cd: CD_CUSTOMER_LIST,
					ws: WS_CUSTOMER_LIST,
					domId: 'table-customer-data'
				});

				$('#customer-data-modal').modal('show');
				
			} else {
				BootstrapDialog.alert({
					title: MSG_TITLE_INFO,
					message: MSG_TRUCK_DATA_EMPTY,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Customer > Customer Data Lookup > DT Row Click Event
		$('#table-customer-data tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtCDP,
				pid: 'cust_id',
				buttons: ['#customer-data-modal #select-item']
			});
		});

		// Customer > Customer Data Lookup > Select Item
		$('#customer-data-modal #select-item').on('click', function () {
			var selected_row = dtCDP.row('.selected');
			$('#cust_id').val(selected_row.data().cust_id);
			$('#cust_code').val(selected_row.data().cust_code);
			$('#cust_name').val(selected_row.data().cust_name);
			$('#customer-data-modal').modal('hide');
		});

		/**********************************************************************************************************************************************/

		// Destinations > Open Lookup
		$('#search-destination-data').on('click', function () {		
			if ($('#cust_code').val() != '') {

				// Destroy Destinations DT if initialized
				if ($.fn.DataTable.isDataTable('#table-destination-data')) {
					dtDDP.destroy();
				}

				// Initialize Destinations DT
				dtDDP = initDT_Picker({
					ds: DS_CUSTDEST_LIST,
					cd: CD_CUSTDEST_LIST,
					domId: 'table-destination-data',
					ws: WS_CUSTDEST_LIST + 'cust_id=' +  $('#cust_id').val()
				});

				// Show Lookup
				$('#destination-data-modal').modal('show');
			} else {

				// Show input error
				BootstrapDialog.alert({
					title: MSG_TITLE_INFO,
					message: MSG_CUSTOMER_DATA_EMPTY,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Destination > Lookup > DT Row Click Event
		$('#table-destination-data tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtDDP,
				pid: 'dest_id',
				buttons: ['#destination-data-modal #select-item']
			});
		});

		// Destination > Lookup > Select Item
		$('#destination-data-modal #select-item').on('click', function () {
			var selected_row = dtDDP.row('.selected');

			// Load form values
			$('#dest_id').val(selected_row.data().dest_id);
			$('#dest_zipcode').val(selected_row.data().dest_zipcode);
			$('#dest_location').val(selected_row.data().dest_name + ', ' + selected_row.data().dest_location);

			// Hide Lookup
			$('#destination-data-modal').modal('hide');
		});

		// Destinations > New Item > Open Lookup
		$('#new-destination-data').on('click', function (e) {
			if ($('#wr_id').val() == '')
				return false;
		
			if ($('#cust_code').val() != '') {

				// Destroy Destinations DT if initialized
				if ($.fn.DataTable.isDataTable('#table-destination-data-all')) {
					dtADDP.destroy();
				}

				// Initialize Destinations DT
				dtADDP = initDT_Picker({
					ds: DS_DESTINATION_LIST,
					cd: CD_DESTINATION_LIST,
					domId: 'table-destination-data-all',
					ws: WS_DESTINATION_LIST + 'cust_id=' + $('#cust_id').val()
				});

				// Show Lookup
				$('#destination-data-all-modal').modal('show');
			} else {

				// Show input error
				BootstrapDialog.alert({
					title: MSG_TITLE_INFO,
					message: MSG_CUSTOMER_DATA_EMPTY,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Destination > New Item > Lookup > DT Row Click Event
		$('#table-destination-data-all tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtADDP,
				pid: 'dest_id',
				buttons: ['#destination-data-all-modal #select-item']
			});
		});

		// Destination > New Item > Lookup > Select Item
		$('#destination-data-all-modal #select-item').on('click', function () {
			var cust_id = $('#cust_id').val(),
				selected_row = dtADDP.row('.selected'),
				dest_id = selected_row.data().dest_id,
				post_data = 'custDestInfo={ "cust_id": ' + cust_id + ', "dest_id": ' + dest_id + '}';

			// Load form values
			$('#dest_id').val(dest_id);
			$('#dest_zipcode').val(selected_row.data().dest_zipcode);
			$('#dest_location').val(selected_row.data().dest_name + ', ' + selected_row.data().dest_location);

			// Hide Lookup
			$('#destination-data-all-modal').modal('hide');

			// Insert Customer Destinations
			$.post(WS_CUSTDEST_INSERT, post_data)
				.done(function(data, status) {
					if (data.response.type == 'SUCCESS') {
						BootstrapDialog.closeAll();
					} else {
						BootstrapDialog.alert({
							title: MSG_TITLE_WS_ERROR,
							message: MSG_INFO_WS_ERROR,
							type: BootstrapDialog.TYPE_DANGER,
							callback: function() {
								BootstrapDialog.closeAll();
							}
						});
					}
				});
		});

		/**********************************************************************************************************************************************/

		// Products > Open Lookup
		$('#search-product-data').on('click', function (e) {
			if ($('#wr_id').val() == '')
				return false;
				
			if ($('#cust_code').val() != '') {
				
				// Destroy Customer Products DT if initialized
				if ($.fn.DataTable.isDataTable('#table-product-data')) {
					dtPDP.destroy();
				}
				
				// Destroy All Products DT if initialized
				if ($.fn.DataTable.isDataTable('#table-product-data-all')) {
					dtAPDP.destroy();
				}
				
				// Initialize Customer Products DT
				dtPDP = initDT_Picker({					
					ds: DS_CUSTPROD_LIST,
					cd: CD_CUSTPROD_LIST,
					domId: 'table-product-data',
					ws: WS_CUSTPROD_LIST + 'cust_id=' +  $('#cust_id').val()
				});
				
				// Initialize All Products DT
				dtAPDP = initDT_Picker({					
					ds: DS_PRODUCT_LIST,
					cd: CD_PRODUCT_LIST,				
					domId: 'table-product-data-all',					
					ws: WS_PRODUCT_LIST + 'cust_id=' +  $('#cust_id').val()
				});
				
				// Show Lookup
				$('#product-data-modal').modal('show');
			} else {
			
				// Show input error
				BootstrapDialog.alert({
					title: MSG_TITLE_INFO,
					message: MSG_CUSTOMER_DATA_EMPTY,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});
		
		// Products > Lookup > onShow Event
		$('#product-data-modal').on('shown.bs.modal', function () {
			$('#btnAllProdOK, #btnCustProdOK').prop('disabled', true);
			$('#tabSelectProduct a[href="#products"]').tab('show');
		})

		// Products > Lookup > All Products Click Event
		$('#tabSelectProduct a[href="#products"]').on('click', function () {
			dtAPDP.ajax.reload();
			$('#btnAllProdOK').prop('disabled', true);
		});

		// Products > Lookup > Customer Products Click Event
		$('#tabSelectProduct a[href="#customerProducts"]').on('click', function () {
			dtPDP.ajax.reload();
			$('#btnCustProdOK').prop('disabled', true);
		});
		
		// All Products > Lookup > DT Row Click Event
		$('#table-product-data-all tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtAPDP,
				pid: 'prod_id',
				buttons: ['#btnAllProdOK']
			});
		});

		// Customer Products > Lookup > DT Row Click Event
		$('#table-product-data tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtPDP,
				pid: 'prod_id',
				buttons: ['#btnCustProdOK']
			});
		});
		
		// All Products > Lookup > Select Item
		$('#product-data-modal #btnAllProdOK').on('click', function () {
			var selected_row = dtAPDP.row('.selected');
			
			// Load form values
			$('#prod_id').val(selected_row.data().prod_id);
			$('#prod_code').val(selected_row.data().prod_code);
			$('#prod_name').val(selected_row.data().prod_name);
			$('#unit_price').val(selected_row.data().unit_price);
			
			setTotalPrice();
					
			// Hide Lookup
			$('#product-data-modal').modal('hide');
		});
		
		// Customer Products > Lookup > Select Item
		$('#product-data-modal #btnCustProdOK').on('click', function () {
			var selected_row = dtPDP.row('.selected');
			
			// Load form values
			$('#prod_id').val(selected_row.data().prod_id);
			$('#prod_code').val(selected_row.data().prod_code);
			$('#prod_name').val(selected_row.data().prod_name);
			$('#unit_price').val(selected_row.data().unit_price);
			
			setTotalPrice();
			
			// Hide Lookup
			$('#product-data-modal').modal('hide');
		});
		
		// Cancel Lookup
		$('.btnAllProdCancel, .btnCustProdCancel').on('click', function () {
			$('#product-data-modal').modal('hide');
			$('#btnAllProdOK, #btnCustProdOK').prop('disabled', true);
		});

		// Product > New Item
		$('#new-product-data').on('click', function (e) {
			if ($('#wr_id').val() == '')
				return false;
		
			if ($('#cust_code').val() != '') {
				showNewModalForm({
					objectId: 'prodInfo',
					dataType: 'Product Data',
					status: 'SECOND_WEIGHT_IN',
					formId: '#dataProductForm',
					formSrc: FORM_CUST_PRODUCT_DATA,
					wsInsert: WS_CUST_PRODUCT_INSERT,
					data: { cust_id: $('#cust_id').val() }
				});
			} else {
				BootstrapDialog.alert({
					type: 'type-danger',
					title: MSG_TITLE_INFO,
					message: MSG_CUSTOMER_DATA_EMPTY,
					callback: function () {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		/**********************************************************************************************************************************************/

		// Suppliers > Open Lookup
		$('#search-supplier-data').on('click', function (e) {
			if ($('#wr_id').val() == '')
				return false;
				
			if ($('#truck_code').val() != '') {
				
				// Destroy Suppliers DT if initialized
				if ($.fn.DataTable.isDataTable('#table-supplier-data')) {
					dtSDP.destroy();
				}
				
				// Initialize Suppliers DT
				dtSDP = initDT_Picker({
					ds: DS_SUPPLIER_LIST,
					cd: CD_SUPPLIER_LIST,
					ws: WS_SUPPLIER_LIST,
					domId: 'table-supplier-data'
				});
				
				// Show Lookup
				$('#supplier-data-modal').modal('show');
			} else {
			
				// Show input error
				BootstrapDialog.alert({
					title: MSG_TITLE_INFO,
					message: MSG_TRUCK_DATA_EMPTY,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Suppliers > Lookup > DT Row Click Event
		$('#table-supplier-data tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtSDP,
				pid: 'supp_id',
				buttons: ['#supplier-data-modal #select-item']
			});
		});

		// Suppliers > Lookup > Select Item
		$('#supplier-data-modal #select-item').on('click', function () {
			var selected_row = dtSDP.row('.selected');
			
			// Load form values
			$('#supp_id').val(selected_row.data().supp_id);
			$('#supp_code').val(selected_row.data().supp_code);
			$('#supp_name').val(selected_row.data().supp_name);
			
			// Hide Lookup
			$('#supplier-data-modal').modal('hide');
		});

		// Supplier > New Item
		$('#new-supplier-data').on('click', function (e) {
			if ($('#wr_id').val() == '')
				return false;
				
			showNewModalForm({
				objectId: 'suppInfo',
				dataType: 'Supplier Data',
				status: 'SECOND_WEIGHT_IN',
				formId: '#dataSupplierForm',
				formSrc: FORM_SUPPLIER_DATA,
				wsInsert: WS_SUPPLIER_INSERT
			});
		});

		/**********************************************************************************************************************************************/

		// First Weighing Button > Show Confirm Modal
		$('#first-weighing').on('click', function() {
			if ($('#truck_code').val() == '' || $('#wr_id').val() != '')
				return false;
		
			BootstrapDialog.confirm({
				type: 'type-danger',
				title: MSG_TITLE_CONFIRM_FIRST_WEIGHT,
				message: MSG_FIRST_WEIGHING_CONFIRM,
				callback: function (result) {	
					if (result) {
					
						// Build post data
						var params = 'weightReadingInfo={'
							+ '"weight_count":"1", '
							+ '"weight_status":"PENDING", '
							+ '"user_id": ' + STIC.User.ReadCookie('userid') + ', '
							+ '"truck_code":"' + $('#truck_code').val() + '", '
							+ '"weight_unit":"' + $('#weight-unit').text() + '", '
							+ '"weight_in_reading":"' + $('#weight_in_reading').val().replace(',', '') + '", '
							+ '"weight_in_date":"' + $.formatDateTime('yy-mm-dd hh:ii:ss', new Date()) + '", '
							+ '"date_modified":"' + $.formatDateTime('yy-mm-dd hh:ii:ss', new Date()) + '"}';
						
						console.log('First Weight In: ' + params);
						
						// Call WS
						var result = $.post(WS_FIRST_WEIGHING_INSERT, params);						
						result.done(function(result) {
						
							// Insert Success
							if (result.response.type === 'SUCCESS') {
								toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });								
								BootstrapDialog.alert({
									type: 'type-primary',
									title: MSG_TITLE_INFO,
									message: MSG_FIRST_WEIGHING_SUCCESS,
									callback: function() {
										BootstrapDialog.closeAll();
									}
								});
			
							// Show WS Error
							} else {
								STIC.showWSError();
							}
						});
						
						// Show WS Error
						result.fail(function() {
							STIC.showWSError();
						});
					}
				}
			});
		});

		/**********************************************************************************************************************************************/

		// Second Weighing Button > Show Confirm Modal
		$('#second-weighing').on('click', function(e) {
			if ($('#wr_id').val() == '')
				return false;
		
			var errorMessage = '';
			var inputFields = [
				{ name: 'Truck', field: 'truck_code' },
				{ name: 'Customer', field: 'cust_code' },
				{ name: 'Destination', field: 'dest_zipcode' },
				{ name: 'Product', field: 'prod_code' },
				{ name: 'Supplier', field: 'supp_code' }
			];

			$.each(inputFields, function(index, input) {
				if ($('#' + input.field).val() == '') {
					errorMessage = errorMessage + '<li>' + input.name + '</li>';
					$('label[for="' + input.field + '"]').css('color', 'red');
				}
			});

			if (errorMessage != '') {
				var message = '<ul>' + errorMessage + '</ul>';
				BootstrapDialog.alert({
					type: 'type-danger',
					title: MSG_TITLE_INFO,
					message: 'The following fields are required. Please make sure all details are provided.<div>&nbsp;</div>' + message,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			} else {
				BootstrapDialog.confirm({
					title: MSG_TITLE_CONFIRM_SECOND_WEIGHT,
					message: MSG_SECOND_WEIGHING_CONFIRM,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function(result) {
						if (result) {
							var params = 'weightReadingInfo={'
								+ '"wr_id": "' + $('#wr_id').val() + '", '
								+ '"cust_id": ' + $('#cust_id').val() + ', '
								+ '"dest_id": ' + $('#dest_id').val() + ', '
								+ '"prod_id": ' + $('#prod_id').val() + ', '
								+ '"supp_id": ' + $('#supp_id').val() + ', '
								+ '"user_id": ' + STIC.User.ReadCookie('userid') + ', '
								+ '"unit_price": ' + $('#unit_price').val().replace(',', '') + ', '
								+ '"total_price": ' + $('#total_price').val().replace(',', '') + ', '
								+ '"remarks": "' + $('#remarks').val() + '", '
								+ '"weight_out_reading": ' + $('#weight_out_reading').val().replace(',', '') + ', '
								+ '"compensation": ' + $('#compensation').val().replace(',', '') + ', '
								+ '"net_weight": ' + $('#net_weight').val().replace(',', '') + ', '
								+ '"weight_unit": "' + $('#weight-unit').text() + '", '
								+ '"weight_out_date": "' + $.formatDateTime('yy-mm-dd hh:ii:ss', new Date()) + '", '
								+ '"weight_count": 2, '
								+ '"weight_status": "DONE"}';
							console.log('2nd Weight In: ' + params);
							var result = $.post(WS_SECOND_WEIGHING_UPDATE, params);
							result.done(function (data) {
								BootstrapDialog.alert({
									type: 'type-primary',
									title: MSG_TITLE_INFO,
									message: MSG_SECOND_WEIGHING_SUCCESS,									
									callback: function () {
										BootstrapDialog.closeAll();
									}
								});
								toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });
							});
							result.fail(function () {
								BootstrapDialog.alert({
									type: 'type-danger',
									title: MSG_TITLE_WS_ERROR,
									message: MSG_INFO_WS_ERROR,
									callback: function () {
										BootstrapDialog.closeAll();
									}
								});
							});
						}
					}
				});
			}
		});

		/**********************************************************************************************************************************************/

		// Cancel Weighing Button Click Event
		$('#cancel-weighing').on('click', function() {		
			toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });
		});

		/**********************************************************************************************************************************************/

		// Reprint Docket Button Click Event
		$('#reprint-docket').on('click', function () {
			var win = window.open('http://localhost:8080/forms/pdf.html', 'DocketPrintPreview').focus();
		});
	});

	// Set Net Weight
	function setNetWeight() {
		var weightIn = parseFloat($('#weight_in_reading').val().replace(',', '')),
			weightOut = parseFloat($('#weight_out_reading').val().replace(',', '')),
			compensation = parseFloat($('#compensation').val()) / 100,
			netWeight = (weightIn > weightOut ?
				(weightIn - weightOut) :
				(weightOut - weightIn)),
			finalNetWeight = netWeight - (netWeight * compensation);
		$('#net_weight').val(finalNetWeight.toFixed(2)
			.replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
	}
	
	// Set Total Price
	function setTotalPrice() {
		var unitPrice = parseFloat($('#unit_price').val().replace(',', '')),
			netWeight = parseFloat($('#net_weight').val().replace(',', '')),
			totalPrice = parseFloat(unitPrice * netWeight);
		$('#total_price').val(totalPrice.toFixed(2)
			.replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
	}
	
	// Sample Indicator
	$(document).ready(function () {
		var random = function (max, min) {
				return ((Math.random() * (max - min)) + min).toFixed(2);
		};
		
		// Unit Price onKeyDown
		$('#unit_price').on('keydown', function (e) {
			var self = this;				
			setTimeout(function () {
				var oldVal = $(self).val().replace(/[^\d\.]/g, ''),
					newVal = oldVal != '' ? parseFloat(oldVal).toFixed(2) : '0.00';
				$(self).val(newVal);			
				setTotalPrice();
			}, 0);
		});
		
		// Compensation onKeyDown
		$('#compensation').on('keydown', function (e) {
			var self = this;
			setTimeout(function () {
				var oldVal = $(self).val().replace(/[^\d\.]/g, ''),
					oldVal = oldVal != '' ? parseFloat(oldVal).toFixed(2) : '0.00',
					newVal = (oldVal) > 100 ? '100.00' : oldVal;
				$(self).val(newVal);				
				setTotalPrice();
				setNetWeight();
			}, 0);
		});

		setInterval(function () {
			var rand = '+' + random(41000, 5000)
				.replace(/(\d)(?=(\d{3})+\.)/g, '$1,');			
			
			// 2nd Weighing
			if ($('#wr_id').val() != '') {
				$('#weight-reading').text(rand.toString());
				$('#weight_out_reading').val(rand.replace('+', ''));
				setNetWeight();
				setTotalPrice();
				
			// 1st Weighing
			} else if ($('#truck_code').val() != '') {
				$('#weight-reading').text(rand.toString());
				$('#weight_in_reading').val(rand.replace('+', ''));
			}		
		}, 5000);
	});

	/*
	var scaleReaderUrl = '/scaletech/services/ScaleReaderInfoServices/readScaleReading?response=application/json';
	$(document).ready(function() {
		// Read Reading Scale.
		var intervalId = setInterval(function() {
			$.ajax({
				//url: 'data/scale-reader.json'
				url: scaleReaderUrl
				,type: 'GET'
				,dataType: 'json'
				,success: function(data,tx) {
					var netWg = data['response']['readData-list']['readdata']['read-weight'];
					var st = data['response']['readData-list']['readdata']['read-status1'];
					var gs = data['response']['readData-list']['readdata']['read-status2'];
					var unit = data['response']['readData-list']['readdata']['read-unitType'];

					console.log(data['response']['readData-list']['readdata']['read-weight']);
					$('#weighing-scale').text(netWg);
					$('#unit-type').text(unit);
					$('#read-status1').text(st);
				}
			});

		}, 100); // every 1sec
		console.log('intervalId: '+ intervalId);

		$('#cancel-weighing').on('click', function() {
			clearInterval(intervalId);
			window.location.replace("http://127.0.0.1:8080/scaletech/");
		});
	});
	*/
</script>