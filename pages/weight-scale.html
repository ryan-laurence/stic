<script type="text/javascript" src="js/stic-weight-scale.js"></script>
<script>
	$(function() {
		// Digital Clock
		$('#clock-timer').MyDigitClock({
			bAmPm: true,
			fontSize: 22,
			fontColor: '#FFF',
			background: '#000',
			fontWeight: 'normal',
			bShowHeartBeat: false,
			fontFamily: "'Helvetica Neue', Helvetica, Arial, sans-serif"
		});

		/**********************************************************************************************************************************************/

		// Initialize DT variables
		var dtFWT, dtSWT, dtCDP, dtDDP, dtADDP, dtPDP, dtAPDP, dtSDP;

		/**********************************************************************************************************************************************/

		// Trucks > Open Lookup
		$('#search-truck-data').on('click', function () {
			// Destroy First Weight Trucks DT if initialized
			if ($.fn.DataTable.isDataTable('#table-truck-first')) {
				dtFWT.destroy();
			}

			// Destroy Second Weight Trucks DT if initialized
			if ($.fn.DataTable.isDataTable('#table-truck-second')) {
				dtSWT.destroy();
			}

			// Initialize First Weight Trucks DT
			dtFWT = initDT_Picker({
				domId: 'table-truck-first',
				ds: DS_TRUCK_LIST,
				cd: CD_TRUCK_LIST,
				ws: WS_TRUCK_LIST
			});

			// Initialize Second Weight Trucks DT
			dtSWT = initDT_Picker({
				domId: 'table-truck-second',
				ds: DEFAULT_DATASOURCE,
				cd: CD_CHECK_TRUCK_CODE_LIST,
				ws: WS_CHECK_TRUCK_CODE_LIST
			});

			// Show Lookup
			$('#truck-data-modal').modal('show');
		});

		// Trucks > Lookup > onShow Event
		$('#truck-data-modal').on('shown.bs.modal', function () {
			$('#btnFWTrucksOK, #btnSWTrucksOK').addClass('disabled');
			$('#tabSelectTruck a[href="#firstWeighing"]').tab('show');
		})

		// Trucks > Lookup > First Weighing Click Event
		$('#tabSelectTruck a[href="#firstWeighing"]').on('click', function () {
			dtFWT.ajax.reload();
			$('#btnFWTrucksOK').addClass('disabled');
		});

		// Trucks > Lookup > Second Weighing Click Event
		$('#tabSelectTruck a[href="#secondWeighing"]').on('click', function () {
			dtSWT.ajax.reload();
			$('#btnSWTrucksOK').addClass('disabled');
		});

		// First Weighing Trucks > Lookup > DT Row Click Event
		$('#table-truck-first tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtFWT,
				pid: 'truck_id',
				buttons: ['#btnFWTrucksOK']
			});
		});

		// Second Weighing Trucks > Lookup > DT Row Click Event
		$('#table-truck-second tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtSWT,
				pid: 'truck_id',
				buttons: ['#btnSWTrucksOK']
			});
		});

		// First Weighing Trucks > Lookup > Select Item
		$('#truck-data-modal #btnFWTrucksOK').on('click', function () {
			var selected_row = dtFWT.row('.selected');

			// Toggle form fields & buttons
			toggleWeightScaleFields({ status: 'FIRST_WEIGHT_IN' });

			// Load form values
			$('#truck_code').val(selected_row.data().truck_code);

			// Hide Lookup
			$('#truck-data-modal').modal('hide');
		});

		// Second Weighing Trucks > Lookup > Select Item
		$('#truck-data-modal #btnSWTrucksOK').on('click', function () {
			var selected_row = dtSWT.row('.selected'),
				dateIn =  moment(new Date(selected_row.data().date_in)).format('MM/DD/YYYY'); // Firefox date issue fix

			// Toggle form fields & buttons
			toggleWeightScaleFields({ status: 'SECOND_WEIGHT_IN' });

			// Load form values
			$('#wr_id').val(selected_row.data().wr_id);
			$('#truck_code').val(selected_row.data().truck_code);
			$('#weight_unit').text(selected_row.data().weight_unit);
			$('#weight_in_reading').val(selected_row.data().weight_in_reading);
			$('#weight_in_date').val(dateIn + ' ' + selected_row.data().time_in);

			// Hide Lookup
			$('#truck-data-modal').modal('hide');
		});

		// Cancel Lookup
		$('.btnFWTrucksCancel, .btnSWTrucksCancel').on('click', function () {
			$('#truck-data-modal').modal('hide');
			$('#btnFWTrucksOK, #btnSWTrucksOK').addClass('disabled');
		});

		// Truck > New Item
		$('#new-truck-data').on('click', function () {
			showNewModalForm({
				objectId: 'truckInfo',
				dataType: 'Truck Data',
				status: 'FIRST_WEIGHT_IN',
				formId: '#dataTruckForm',
				formSrc: FORM_TRUCK_DATA,
				wsInsert: WS_TRUCK_INSERT
			});
		});

		/**********************************************************************************************************************************************/

		// Customer > Open Lookup
		$('#search-customer-data').on('click', function () {
			if ($('#truck_code').val() != '') {

				// Destroy Customers DT if initialized
				if ($.fn.DataTable.isDataTable('#table-customer-data')) {
					dtCDP.destroy();
				}

				// Initialize Customers DT
				dtCDP = initDT_Picker({
					ds: DS_CUSTOMER_LIST,
					cd: CD_CUSTOMER_LIST,
					ws: WS_CUSTOMER_LIST,
					domId: 'table-customer-data'
				});

				// Show Lookup
				$('#customer-data-modal').modal('show');
			} else {

				// Show input error
				BootstrapDialog.alert({
					title: MSG_WEIGHT_INPUT_ERROR_TITLE,
					message: MSG_SEARCH_CUSTOMER_ERROR_1,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Customers > Lookup > DT Row Click Event
		$('#table-customer-data tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtCDP,
				pid: 'cust_id',
				buttons: ['#customer-data-modal #select-item']
			});
		});

		// Customers > Lookup > Select Item
		$('#customer-data-modal #select-item').on('click', function () {
			var selected_row = dtCDP.row('.selected');

			// Load form values
			$('#cust_id').val(selected_row.data().cust_id);
			$('#cust_code').val(selected_row.data().cust_code);
			$('#cust_name').val(selected_row.data().cust_name);

			// Hide Lookup
			$('#customer-data-modal').modal('hide');
		});

		// Customers > New Item
		$('#new-customer-data').on('click', function () {
			showNewModalForm({
				objectId: 'custInfo',
				dataType: 'Customer Data',
				status: 'SECOND_WEIGHT_IN',
				formId: '#dataCustomerForm',
				formSrc: FORM_CUSTOMER_DATA,
				wsInsert: WS_CUSTOMER_INSERT
			});
		});

		/**********************************************************************************************************************************************/

		// Destinations > Open Lookup
		$('#search-destination-data').on('click', function () {
			if ($('#cust_code').val() != '') {

				// Destroy Destinations DT if initialized
				if ($.fn.DataTable.isDataTable('#table-destination-data')) {
					dtDDP.destroy();
				}

				// Initialize Destinations DT
				dtDDP = initDT_Picker({
					ds: DS_CUSTDEST_LIST,
					cd: CD_CUSTDEST_LIST,
					domId: 'table-destination-data',
					ws: WS_CUSTDEST_LIST + 'cust_id=' +  $('#cust_id').val()
				});

				// Show Lookup
				$('#destination-data-modal').modal('show');
			} else {

				// Show input error
				BootstrapDialog.alert({
					title: MSG_WEIGHT_INPUT_ERROR_TITLE,
					message: MSG_SEARCH_DESTINATION_ERROR_1,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Destination > Lookup > DT Row Click Event
		$('#table-destination-data tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtDDP,
				pid: 'dest_id',
				buttons: ['#destination-data-modal #select-item']
			});
		});

		// Destination > Lookup > Select Item
		$('#destination-data-modal #select-item').on('click', function () {
			var selected_row = dtDDP.row('.selected');

			// Load form values
			$('#dest_id').val(selected_row.data().dest_id);
			$('#dest_zipcode').val(selected_row.data().dest_zipcode);
			$('#dest_location').val(selected_row.data().dest_name + ', ' + selected_row.data().dest_location);

			// Hide Lookup
			$('#destination-data-modal').modal('hide');
		});

		// Destinations > New Item > Open Lookup
		$('#new-destination-data').on('click', function () {
			if ($('#cust_code').val() != '') {

				// Destroy Destinations DT if initialized
				if ($.fn.DataTable.isDataTable('#table-destination-data-all')) {
					dtADDP.destroy();
				}

				// Initialize Destinations DT
				dtADDP = initDT_Picker({
					ds: DS_DESTINATION_LIST,
					cd: CD_DESTINATION_LIST,
					domId: 'table-destination-data-all',
					ws: WS_DESTINATION_LIST + 'cust_id=' + $('#cust_id').val()
				});

				// Show Lookup
				$('#destination-data-all-modal').modal('show');
			} else {

				// Show input error
				BootstrapDialog.alert({
					title: MSG_WEIGHT_INPUT_ERROR_TITLE,
					message: MSG_SEARCH_DESTINATION_ERROR_1,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Destination > New Item > Lookup > DT Row Click Event
		$('#table-destination-data-all tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtADDP,
				pid: 'dest_id',
				buttons: ['#destination-data-all-modal #select-item']
			});
		});

		// Destination > New Item > Lookup > Select Item
		$('#destination-data-all-modal #select-item').on('click', function () {
			var cust_id = $('#cust_id').val(),
				selected_row = dtADDP.row('.selected'),
				dest_id = selected_row.data().dest_id,
				post_data = 'custDestInfo={ "cust_id": ' + cust_id + ', "dest_id": ' + dest_id + '}';

			// Load form values
			$('#dest_id').val(dest_id);
			$('#dest_zipcode').val(selected_row.data().dest_zipcode);
			$('#dest_location').val(selected_row.data().dest_name + ', ' + selected_row.data().dest_location);

			// Hide Lookup
			$('#destination-data-all-modal').modal('hide');

			// Insert Customer Destinations
			$.post(WS_CUSTDEST_INSERT, post_data)
				.done(function(data, status) {
					if (data.response.type == 'SUCCESS') {
						BootstrapDialog.closeAll();
					} else {
						BootstrapDialog.alert({
							title: MSG_WS_ERROR_TITLE,
							message: MSG_WS_ERROR_INFO,
							type: BootstrapDialog.TYPE_DANGER,
							callback: function() {
								BootstrapDialog.closeAll();
							}
						});
					}
				});
		});

		/**********************************************************************************************************************************************/

		// Products > Open Lookup
		$('#search-product-data').on('click', function () {
			if ($('#cust_code').val() != '') {
				
				// Destroy Customer Products DT if initialized
				if ($.fn.DataTable.isDataTable('#table-product-data')) {
					dtPDP.destroy();
				}
				
				// Destroy All Products DT if initialized
				if ($.fn.DataTable.isDataTable('#table-product-data-all')) {
					dtAPDP.destroy();
				}
				
				// Initialize Customer Products DT
				dtPDP = initDT_Picker({					
					ds: DS_CUSTPROD_LIST,
					cd: CD_CUSTPROD_LIST,
					domId: 'table-product-data',
					ws: WS_CUSTPROD_LIST + 'cust_id=' +  $('#cust_id').val()
				});
				
				// Initialize All Products DT
				dtAPDP = initDT_Picker({					
					ds: DS_PRODUCT_LIST,
					cd: CD_PRODUCT_LIST,				
					domId: 'table-product-data-all',					
					ws: WS_PRODUCT_LIST + 'cust_id=' +  $('#cust_id').val()
				});
				
				// Show Lookup
				$('#product-data-modal').modal('show');
			} else {
			
				// Show input error
				BootstrapDialog.alert({
					title: MSG_WEIGHT_INPUT_ERROR_TITLE,
					message: MSG_SEARCH_PRODUCT_ERROR_1,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});
		
		// Products > Lookup > onShow Event
		$('#product-data-modal').on('shown.bs.modal', function () {
			$('#btnAllProdOK, #btnCustProdOK').addClass('disabled');
			$('#tabSelectProduct a[href="#products"]').tab('show');
		})

		// Products > Lookup > All Products Click Event
		$('#tabSelectProduct a[href="#products"]').on('click', function () {
			dtAPDP.ajax.reload();
			$('#btnAllProdOK').addClass('disabled');
		});

		// Products > Lookup > Customer Products Click Event
		$('#tabSelectProduct a[href="#customerProducts"]').on('click', function () {
			dtPDP.ajax.reload();
			$('#btnCustProdOK').addClass('disabled');
		});
		
		// All Products > Lookup > DT Row Click Event
		$('#table-product-data-all tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtAPDP,
				pid: 'prod_id',
				buttons: ['#btnAllProdOK']
			});
		});

		// Customer Products > Lookup > DT Row Click Event
		$('#table-product-data tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtPDP,
				pid: 'prod_id',
				buttons: ['#btnCustProdOK']
			});
		});
		
		// All Products > Lookup > Select Item
		$('#product-data-modal #btnAllProdOK').on('click', function () {
			var selected_row = dtAPDP.row('.selected');
			
			// Load form values
			$('#prod_id').val(selected_row.data().prod_id);
			$('#prod_code').val(selected_row.data().prod_code);
			$('#prod_name').val(selected_row.data().prod_name);
			$('#unit_price').val(selected_row.data().unit_price);
			
			// Hide Lookup
			$('#product-data-modal').modal('hide');
		});
		
		// Customer Products > Lookup > Select Item
		$('#product-data-modal #btnCustProdOK').on('click', function () {
			var selected_row = dtPDP.row('.selected');
			
			// Load form values
			$('#prod_id').val(selected_row.data().prod_id);
			$('#prod_code').val(selected_row.data().prod_code);
			$('#prod_name').val(selected_row.data().prod_name);
			$('#unit_price').val(selected_row.data().unit_price);
			
			// Hide Lookup
			$('#product-data-modal').modal('hide');
		});
		
		// Cancel Lookup
		$('.btnAllProdCancel, .btnCustProdCancel').on('click', function () {
			$('#product-data-modal').modal('hide');
			$('#btnAllProdOK, #btnCustProdOK').addClass('disabled');
		});

		// Product > New Item
		$('#new-product-data').on('click', function () {
			showNewModalForm({
				objectId: 'prodInfo',
				dataType: 'Product Data',
				status: 'SECOND_WEIGHT_IN',
				formId: '#dataProductForm',
				formSrc: FORM_CUST_PRODUCT_DATA,
				wsInsert: WS_CUST_PRODUCT_INSERT,
				data: { cust_id: $('#cust_id').val() }
			});
		});

		/**********************************************************************************************************************************************/

		// Suppliers > Open Lookup
		$('#search-supplier-data').on('click', function () {
			if ($('#truck_code').val() != '') {
				
				// Destroy Suppliers DT if initialized
				if ($.fn.DataTable.isDataTable('#table-supplier-data')) {
					dtSDP.destroy();
				}
				
				// Initialize Suppliers DT
				dtSDP = initDT_Picker({
					ds: DS_SUPPLIER_LIST,
					cd: CD_SUPPLIER_LIST,
					ws: WS_SUPPLIER_LIST,
					domId: 'table-supplier-data'
				});
				
				// Show Lookup
				$('#supplier-data-modal').modal('show');
			} else {
			
				// Show input error
				BootstrapDialog.alert({
					title: MSG_WEIGHT_INPUT_ERROR_TITLE,
					message: MSG_SEARCH_CUSTOMER_ERROR_1,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Suppliers > Lookup > DT Row Click Event
		$('#table-supplier-data tbody').on( 'click', 'tr', function () {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtSDP,
				pid: 'supp_id',
				buttons: ['#supplier-data-modal #select-item']
			});
		});

		// Suppliers > Lookup > Select Item
		$('#supplier-data-modal #select-item').on('click', function () {
			var selected_row = dtSDP.row('.selected');
			
			// Load form values
			$('#supp_id').val(selected_row.data().supp_id);
			$('#supp_code').val(selected_row.data().supp_code);
			$('#supp_name').val(selected_row.data().supp_name);
			
			// Hide Lookup
			$('#supplier-data-modal').modal('hide');
		});

		// Supplier > New Item
		$('#new-supplier-data').on('click', function () {
			showNewModalForm({
				objectId: 'suppInfo',
				dataType: 'Supplier Data',
				status: 'SECOND_WEIGHT_IN',
				formId: '#dataSupplierForm',
				formSrc: FORM_SUPPLIER_DATA,
				wsInsert: WS_SUPPLIER_INSERT
			});
		});

		/**********************************************************************************************************************************************/

		// First Weighing Button > Show Confirm Modal
		$('#first-weighing').on('click', function() {
			BootstrapDialog.confirm({
				title: MSG_TITLE_CONFIRM_FIRST_WEIGHT,
				message: MSG_FIRST_WEIGHING_CONFIRM,
				type: BootstrapDialog.TYPE_DANGER,
				callback: function(result) {
					if (result) {
						var params = 'weightReadingInfo={'
							+ '"weight_count":"1", '
							+ '"weight_status":"PENDING", '
							+ '"user_id": ' + readCookie('userid') + ', '
							+ '"truck_code":"' + $('#truck_code').val() + '", '
							+ '"weight_unit":"' + $('#weight_unit').text() + '", '
							+ '"weight_in_reading":"' + $('#weight_in_reading').val() + '", '
							+ '"weight_in_date":"' + $.formatDateTime('yy-mm-dd hh:ii:ss', new Date()) + '", '
							+ '"date_modified":"' + $.formatDateTime('yy-mm-dd hh:ii:ss', new Date()) + '"}';
						console.log('First Weight In: ' + params);
						var result = $.post(WS_FIRST_WEIGHING_INSERT, params);
						result.done(function(data) {
							BootstrapDialog.alert({
								title: MSG_INFO_TITLE,
								message: MSG_FIRST_WEIGHING_SUCCESS,
								type: BootstrapDialog.TYPE_PRIMARY,
								callback: function() {
									BootstrapDialog.closeAll();
								}
							});
							toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });
						});
						result.fail(function() {
							BootstrapDialog.alert({
								title: MSG_WS_ERROR_TITLE,
								message: MSG_WS_ERROR_INFO,
								type: BootstrapDialog.TYPE_DANGER,
								callback: function() {
									BootstrapDialog.closeAll();
								}
							});
						});
					}
				}
			});
		});

		/**********************************************************************************************************************************************/

		// Second Weighing Button > Show Confirm Modal
		$('#second-weighing').on('click', function() {
			var errorMessage = '';
			var inputFields = [
				{ label: 'inputTruckCode', name: 'Truck Code', field: 'truck_code' },
				{ label: 'inputCustomerCode', name: 'Customer Code', field: 'cust_id' },
				{ label: 'inputDestinationCode', name: 'Destination Code', field: 'dest_id' },
				{ label: 'inputProductCode', name: 'Product Code', field: 'prod_id' },
				{ label: 'inputSupplierCode', name: 'Supplier Code', field: 'supp_id' }
			];

			$.each(inputFields, function(index, input) {
				if ($('#' + input.field).val() == '') {
					errorMessage = errorMessage + '<li>' + input.name + '</li>';
					$('label[for="' + input.label + '"]').css('color', 'red');
				}
			});

			if (errorMessage != '') {
				var message = '<ul>' + errorMessage + '</ul>';
				BootstrapDialog.alert({
					title: MSG_WEIGHT_INPUT_ERROR_TITLE,
					message: 'The following fields are required. Please make sure all details are provided.<div>&nbsp;</div>' + message,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			} else {
				BootstrapDialog.confirm({
					title: MSG_TITLE_CONFIRM_SECOND_WEIGHT,
					message: MSG_SECOND_WEIGHING_CONFIRM,
					type: BootstrapDialog.TYPE_DANGER,
					callback: function(result) {
						if (result) {
							var params = 'weightReadingInfo={'
								+ '"wr_id": "' + $('#wr_id').val() + '", '
								+ '"truck_code": "' + $('#truck_code').val() + '", '
								+ '"cust_id": ' + $('#cust_id').val() + ', '
								+ '"dest_id": ' + $('#dest_id').val() + ', '
								+ '"prod_id": ' + $('#prod_id').val() + ', '
								+ '"supp_id": ' + $('#supp_id').val() + ', '
								+ '"user_id": ' + readCookie('userid') + ', '
								+ '"unit_price": ' + $('#unit_price').val() + ', '
								+ '"total_price": ' + $('#total_price').val() + ', '
								+ '"remarks": "' + $('#remarks').val() + '", '
								+ '"weight_in_reading": ' + $('#weight_in_reading').val() + ', '
								+ '"weight_out_reading": ' + $('#weight_out_reading').val() + ', '
								+ '"compensation": ' + $('#compensation').val() + ', '
								+ '"net_weight": ' + $('#net_weight').val() + ', '
								+ '"weight_unit": "' + $('#weight_unit').text() + '", '
								+ '"weight_in_date": "' + $.formatDateTime('yy-mm-dd hh:ii:ss', new Date($('#weight_in_date').val())) + '", '
								+ '"weight_out_date": "' + $.formatDateTime('yy-mm-dd hh:ii:ss', new Date()) + '", '
								+ '"weight_count": 2, '
								+ '"weight_status": "DONE"}';
							console.log('2nd Weight In: ' + params);
							var result = $.post(WS_SECOND_WEIGHING_UPDATE, params);
							result.done(function(data) {
								BootstrapDialog.alert({
									title: MSG_INFO_TITLE,
									message: 'Second Weighing completed.',
									type: BootstrapDialog.TYPE_PRIMARY,
									callback: function() {
										BootstrapDialog.closeAll();
									}
								});
								toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });
							});
							result.fail(function() {
								BootstrapDialog.alert({
									title: MSG_WS_ERROR_TITLE,
									message: MSG_WS_ERROR_INFO,
									type: BootstrapDialog.TYPE_DANGER,
									callback: function() {
										BootstrapDialog.closeAll();
									}
								});
							});
						}
					}
				});
			}
		});

		/**********************************************************************************************************************************************/

		// Cancel Weighing Button Click Event
		$('#cancel-weighing').on('click', function() {
			toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });
		});

		/**********************************************************************************************************************************************/

		// Reprint Docket Button Click Event
		$('#reprint-docket').on('click', function() {
			BootstrapDialog.alert({
				title: MSG_INFO_TITLE,
				message: 'Call Print Docket API',
				type: BootstrapDialog.TYPE_DANGER
			});
		});
	});
	/*
	var scaleReaderUrl = '/scaletech/services/ScaleReaderInfoServices/readScaleReading?response=application/json';
	$(document).ready(function() {
		// Read Reading Scale.
		var intervalId = setInterval(function() {
			$.ajax({
				//url: 'data/scale-reader.json'
				url: scaleReaderUrl
				,type: 'GET'
				,dataType: 'json'
				,success: function(data,tx) {
					var netWg = data['response']['readData-list']['readdata']['read-weight'];
					var st = data['response']['readData-list']['readdata']['read-status1'];
					var gs = data['response']['readData-list']['readdata']['read-status2'];
					var unit = data['response']['readData-list']['readdata']['read-unitType'];

					console.log(data['response']['readData-list']['readdata']['read-weight']);
					$('#weighing-scale').text(netWg);
					$('#unit-type').text(unit);
					$('#read-status1').text(st);
				}
			});

		}, 1000); // every 1sec
		console.log('intervalId: '+ intervalId);

		$('#cancel-weighing').on('click', function() {
			clearInterval(intervalId);
			window.location.replace("http://127.0.0.1:8080/scaletech/");
		});
	});
	*/
</script>
<style>
	.no-padding-left {
		padding-left: 0px !important;
	}
</style>
<div class="panel panel-primary" style="width: 990px !important; margin-left: auto; margin-right: auto">
	<div class="panel-heading" style="text-align: left">
		<i class="fa fa-balance-scale"></i> Weighing
	</div>
	<div class="panel-body">
		<div class="form-horizontal">
			<div class="form-group" style="margin-bottom: 0px;">
				<div class="col-lg-4 no-padding-left">
					<div id="clock-timer" style="padding: 8px; width: 150px; text-align: center"></div>
				</div>
				<div class="col-lg-8" style="margin-bottom: 0px;">
					<div id="weighing-scale" style="border:1px solid #000; width:400px; text-align:right; font-size:62px; padding:20px 40px 20px 0px; background:#222; color:#fff; float:left">
						+  0.00
					</div>
					<div style="float:left; margin-top:20px; margin-left:10px; font-weight:bold;">
						<h1><span id="weight_unit">kg</span><small id="read-status1" style="margin-left: 10px">stable</small></h1>
					</div>
				</div>
			</div>
		</div>
		<div style="margin: 15px 0px 15px 0px; border-top: 1px solid #CCC"></div>
		<div class="container well no-margin-bottom no-margin-right" style="width: auto; padding: 10px">
			<div class="form-horizontal no-margin-bottom" style="width: 750px; float: left;" id="weight-scale-form">
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="inputTruckCode" class="col-sm-2 control-label" style="width: 130px">Truck</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-default" id="new-truck-data"><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-default" id="search-truck-data"><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="truck_code" data-type="varchar" data-stage="first" disabled>
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="inputTruckCode" class="col-sm-2 control-label" style="width: 130px">Customer</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-default disabled" id="new-customer-data"><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-default disabled" id="search-customer-data"><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="cust_code" data-type="varchar" data-stage="second" disabled>
					</div>
					<div class="btn-group" role="group" style="width: 365px">
						<input type="text" class="form-control" id="cust_name" data-type="varchar" data-stage="second" disabled>
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="inputTruckCode" class="col-sm-2 control-label" style="width: 130px">Destination</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-default disabled" id="new-destination-data"><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-default disabled" id="search-destination-data"><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="dest_zipcode" data-type="varchar" data-stage="second" disabled>
					</div>
					<div class="btn-group" role="group" style="width: 365px">
						<input type="text" class="form-control" id="dest_location" data-type="varchar" data-stage="second" disabled>
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="inputTruckCode" class="col-sm-2 control-label" style="width: 130px">Product</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-default disabled" id="new-product-data"><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-default disabled" id="search-product-data"><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="prod_code" data-type="varchar" data-stage="second" disabled>
					</div>
					<div class="btn-group" role="group" style="width: 365px">
						<input type="text" class="form-control" id="prod_name" data-type="varchar" data-stage="second" disabled>
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="inputTruckCode" class="col-sm-2 control-label" style="width: 130px">Supplier</label>
					</div>
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-default disabled" id="new-supplier-data"><i class="fa fa-plus"></i></button>
						<button type="button" class="btn btn-default disabled" id="search-supplier-data"><i class="fa fa-search"></i></button>
					</div>
					<div class="btn-group" role="group" style="width: 150px">
						<input type="text" class="form-control" id="supp_code" data-type="varchar" data-stage="second" disabled>
					</div>
					<div class="btn-group" role="group" style="width: 365px">
						<input type="text" class="form-control" id="supp_name" data-type="varchar" data-stage="second" disabled>
					</div>
				</div>
				<div style="margin: 10px 15px 15px 0px; border-top: 1px solid #CCC"></div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="inputTruckCode" class="col-sm-2 control-label" style="width: 130px">User</label>
					</div>
					<div class="btn-group" role="group">
						<input type="text" class="form-control" id="user_name" style="width: 120px" value="admin" data-stage="first second" disabled>
					</div>
					<div class="btn-group" role="group">
						<label for="inputUnitPrice" class="col-sm-2 control-label" style="width:100px; text-align:right">Unit Price</label>
					</div>
					<div class="btn-group" role="group">
						<input type="text" class="form-control" id="unit_price" style="width: 125px" value="0.00" data-type="float" data-stage="second" data-action="enable" disabled>
					</div>
					<div class="btn-group" role="group">
						<label for="inputTotalPrice" class="col-sm-2 control-label" style="width:110px; text-align:right">Total Price</label>
					</div>
					<div class="btn-group" role="group">
						<input type="text" class="form-control" id="total_price" style="width: 125px" value="0.00" data-type="float" data-stage="second" disabled>
					</div>
				</div>
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group" role="group">
						<label for="inputTruckCode" class="col-sm-2 control-label" style="width: 130px">Remarks</label>
					</div>
					<div class="btn-group" role="group" style="width: 600px">
						<input type="text" class="form-control" id="remarks" placeholder="Enter Remarks here..." data-type="varchar" data-stage="second" data-action="enable" disabled>
					</div>
				</div>
				<div style="margin: 10px 15px 8px 0px; border-top: 1px solid #CCC"></div>
				<div class="form-group no-margin-bottom">
					<div class="col-sm-2 no-padding-left" style="margin-left: 20px; width: 175px">
						<label for="inputTruckInWeight" class="control-label">Truck In Weight</label>
						<input type="text" class="form-control" id="weight_in_reading" value="0.00" data-type="float" data-stage="first second" disabled>
					</div>
					<div class="col-sm-2 no-padding-left" style="width: 175px">
						<label for="inputTruckOutWeight" class="control-label">Truck Out Weight</label>
						<input type="text" class="form-control" id="weight_out_reading" value="0.00" data-type="float" data-stage="second" disabled>
					</div>
					<div class="col-sm-2 no-padding-left" style="width: 175px">
						<label for="inputTruckOutWeight" class="control-label">Compensation(%)</label>
						<input type="text" class="form-control col-sm-1" id="compensation" value="0.00" data-type="float" data-stage="second" data-action="enable" disabled>
					</div>
					<div class="col-sm-2 no-padding-left" style="width: 175px">
						<label for="inputNetWeight" class="control-label">Net Weight</label>
						<input type="text" class="form-control" id="net_weight" value="0.00" data-type="float" data-stage="second" disabled>
					</div>
				</div>
			</div>
			<div class="form-horizontal no-margin-bottom" style="width: 180px; float: right;">
				<button id="first-weighing" class="btn btn-primary btn-lg disabled" data-type="button"><i class="fa fa-tag fa-3x"></i><p>First Weighing</p></button>
				<button id="second-weighing" class="btn btn-primary btn-lg disabled" data-type="button"><i class="fa fa-tags fa-3x"></i><p>Second Weighing</p></button>
				<button id="cancel-weighing" class="btn btn-primary btn-lg disabled" data-type="button"><i class="fa fa-ban fa-3x"></i><p>Cancel</p></button>
				<button id="reprint-docket" class="btn btn-primary btn-lg disabled no-margin-bottom" data-type="button"><i class="glyphicon glyphicon-print fa-3x"></i><p>Print Docket</p></button>
			</div>
		</div>
	</div>
</div>
<input type="hidden" data-stage="second" id="wr_id">
<input type="hidden" data-stage="second" id="cust_id">
<input type="hidden" data-stage="second" id="dest_id">
<input type="hidden" data-stage="second" id="prod_id">
<input type="hidden" data-stage="second" id="supp_id">
<input type="hidden" data-stage="second" id="weight_in_date">
<div class="modal fade bootstrap-dialog type-primary" id="truck-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-truck"></i> Select Truck Code
			</div>
			<div class="modal-body">
				<ul class="nav nav-tabs" role="tablist" style="margin-bottom: 15px;" id="tabSelectTruck">
					<li role="presentation" class="active">
						<a href="#firstWeighing" aria-controls="firstWeighing" role="tab" data-toggle="tab">
							<i class="fa fa-tag"></i> First Weighing
						</a>
					</li>
					<li role="presentation">
						<a href="#secondWeighing" aria-controls="secondWeighing" role="tab" data-toggle="tab">
							<i class="fa fa-tags"></i> Second Weighing
						</a>
					</li>
				</ul>
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="firstWeighing">
						<div class="alert alert-info" role="alert">
							<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
							<ul>
								<li>Records listed here are Truck Codes available for First Weighing only.</li>
								<li>To add a new Truck Code for First Weighing, use the Weighing Scale form.</li>
							</ul>
						</div>
						<table class="display compact" id="table-truck-first" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">Truck ID</th>
									<th class="text-left">Truck Code</th>
									<th class="text-left">Date Modified</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary btnFWTrucksCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary disabled" id="btnFWTrucksOK"><i class="fa fa-check"></i> OK</button>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="secondWeighing">
						<div class="alert alert-info" role="alert">
							<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
							<ul>
								<li>Records listed here are Truck Codes available for Second Weighing only.</li>
								<li>To remove a Truck Code from Second Weighing, go to the Truck In report page.</li>
							</ul>
						</div>
						<table class="display compact" id="table-truck-second" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">ID</th>
									<th class="text-left">Truck Code</th>
									<th class="text-left">Date In</th>
									<th class="text-left">Time In</th>
									<th class="text-left">Weight In</th>
									<th class="text-left">Unit</th>
									<th class="text-left">User</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary btnSWTrucksCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary disabled" id="btnSWTrucksOK"><i class="fa fa-check"></i> OK</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="customer-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-users"></i> Select Customer
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
					<ul>
						<li>Records listed here are Customer Details that are already available in the system.</li>
						<li>To add new Customer Details, use the Weighing Scale form.</li>
					</ul>
				</div>
				<table class="display compact" id="table-customer-data" style="width: 100%">
					<thead>
						<tr>
							<th class="text-left">Customer ID</th>
							<th class="text-left">Customer Code</th>
							<th class="text-left">Customer Name</th>
							<th class="text-left">Date Modified</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary disabled" id="select-item"><i class="fa fa-check"></i> OK</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="destination-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-map-marker"></i> Select Destination
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
					<ul>
						<li>Records listed here are Destination Details that are already assigned to the selected Customer Detail.</li>
						<li>To assign new Destination Details to the selected Customer Detail, use the Weighing Scale form.</li>
					</ul>
				</div>
				<table class="display compact" id="table-destination-data" style="width: 100%">
					<thead>
						<tr>
							<th class="text-left">CD ID</th>
							<th class="text-left">Customer ID</th>
							<th class="text-left">Destination ID</th>
							<th class="text-left">Zip Code</th>
							<th class="text-left">Name</th>
							<th class="text-left">Location</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary disabled" id="select-item"><i class="fa fa-check"></i> OK</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="destination-data-all-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-map-marker"></i> New Destination
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
					<ul>
						<li>Records listed here are Destination Details that are not yet assigned to the selected Customer Detail.</li>
						<li>To assign new Destination Details to the selected Customer Detail, select a record below.</li>
					</ul>
				</div>
				<table class="display compact" id="table-destination-data-all" style="width: 100%">
					<thead>
						<tr>
							<th class="text-left">Destination ID</th>
							<th class="text-left">Zip Code</th>
							<th class="text-left">Name</th>
							<th class="text-left">Location</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary disabled" id="select-item"><i class="fa fa-floppy-o"></i> Save</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="product-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-product-hunt"></i> Select Product
			</div>
			<div class="modal-body">
				<ul class="nav nav-tabs" role="tablist" style="margin-bottom: 15px;" id="tabSelectProduct">
					<li role="presentation" class="active">
						<a href="#products" aria-controls="products" role="tab" data-toggle="tab">
							<i class="fa fa-product-hunt"></i> Products
						</a>
					</li>
					<li role="presentation">
						<a href="#customerProducts" aria-controls="customerProducts" role="tab" data-toggle="tab">
							<i class="fa fa-user"></i> Customer Products
						</a>
					</li>
				</ul>
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="products">
						<div class="alert alert-info" role="alert">
							<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
							<ul>
								<li>Records listed here are Product Details that are not yet assigned to the selected Customer Detail.</li>
								<li>To add new Product Details, use the Weighing Scale form.</li>
							</ul>
						</div>
						<table class="display compact" id="table-product-data-all" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">Product ID</th>
									<th class="text-left">Product Code</th>
									<th class="text-left">Product Name</th>
									<th class="text-left">Unit Price</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary btnAllProdCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary disabled" id="btnAllProdOK"><i class="fa fa-check"></i> OK</button>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="customerProducts">
						<div class="alert alert-info" role="alert">
							<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
							<ul>
								<li>Records listed here are Product Details that are already assigned to the selected Customer Detail.</li>
								<li>To assign other Product Details to the selected Customer Detail, go to the Products tab.</li>
							</ul>
						</div>
						<table class="display compact" id="table-product-data" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">CP ID</th>
									<th class="text-left">Customer ID</th>
									<th class="text-left">Product ID</th>
									<th class="text-left">Product Code</th>
									<th class="text-left">Product Name</th>
									<th class="text-left">Unit Price</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary btnCustProdCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary disabled" id="btnCustProdOK"><i class="fa fa-check"></i> OK</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="supplier-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-users"></i> Select Supplier
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<h5 class="no-margin-top"><i class="fa fa-info-circle"></i> <strong>Note(s):</strong></h5>
					<ul>
						<li>Records listed here are Supplier Details that are already available in the system.</li>
						<li>To add new Supplier Details, use the Weighing Scale form.</li>
					</ul>
				</div>
				<table class="display compact" id="table-supplier-data" style="width: 100%">
					<thead>
						<tr>
							<th class="text-left">Supplier ID</th>
							<th class="text-left">Supplier Code</th>
							<th class="text-left">Supplier Name</th>
							<th class="text-left">Date Modified</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary disabled" id="select-item"><i class="fa fa-check"></i> OK</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
			</div>
		</div>
	</div>
</div>