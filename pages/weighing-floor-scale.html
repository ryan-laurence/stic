<div class="panel panel-primary" style="width: 970px !important; margin-left: auto; margin-right: auto">
	<div class="panel-heading" style="text-align: left">
		<i class="fa fa-balance-scale"></i> Floor Scale
	</div>
	<div class="panel-body">
		<div class="row zero-margin">
			<div class="weight-lcd">
				<div id="weight-reading" class="weight-reading">+0.00</div>
				<div class="weight-info">
					<div id="weight-unit" class="weight-unit">kg</div>
					<div id="weight-status"class="weight-status">inactive</div>
				</div>
				<div class="weight-stage">
					<div class="txt1"><img src="images/numeric-0-box-outline.png"></div>
				</div>
				<div class="weight-error"></div>
			</div>
		</div>
		<div class="container well no-margin-bottom no-margin-right" style="width: auto; padding: 10px">
			<div class="form-horizontal no-margin-bottom" id="weight-scale-form" style="width: 80%; float: left">
				<div class="row row-1">
					<div class="col-1">
						<label for="trans_code" class="control-label">Transaction</label>
					</div>
					<div class="col-2">
						<div class="row row-2">
							<div class="col-21">
								<div class="btn-group" role="group">
									<button type="button" class="btn btn-primary" id="new-truck-data"
										data-toggle="popover"
										data-trigger="hover"
										data-placement="bottom"
										data-container="body"
										data-html="true"
										title='<i class="fa fa-plus"></i> <strong>New Transaction</strong>'
										data-content="Click to create a new transaction code for First Weighing."><i class="fa fa-plus"></i></button>
									<button type="button" class="btn btn-primary" id="search-truck-data"
										data-toggle="popover"
										data-trigger="hover"
										data-placement="bottom"
										data-container="body"
										data-html="true"
										title='<i class="fa fa-list"></i> <strong>Transaction Lookup</strong>'
										data-content="Click to list all transaction codes that are available for Second Weighing."><i class="fa fa-list"></i></button>
								</div>
							</div>
							<div class="col-22">
								<input type="text" class="form-control bg-white" id="trans_code" data-type="varchar" data-stage="first" placeholder="Transaction Code" readonly>
							</div>
						</div>
					</div>
				</div>
				<hr/>
				<div class="row row-1">
					<div class="col-1">
						<label for="customer" class="control-label">Customer</label>
					</div>
					<div class="col-2">
						<div class="row row-2">
							<div class="col-21">
								<div class="btn-group" role="group">
									<button type="button" class="btn btn-primary" id="new-customer-data" disabled
										data-toggle="popover"
										data-trigger="hover"
										data-placement="bottom"
										data-container="body"
										data-html="true"
										title='<i class="fa fa-plus"></i> <strong>New Customer Data</strong>'
										data-content="Click to create new customer data for Second Weighing."><i class="fa fa-plus"></i></button>
									<button type="button" class="btn btn-primary" id="search-customer-data" disabled
										data-toggle="popover"
										data-trigger="hover"
										data-placement="bottom"
										data-container="body"
										data-html="true"
										title='<i class="fa fa-list"></i> <strong>Customer Data Lookup</strong>'
										data-content="Click to list all customer data that are available for Second Weighing."><i class="fa fa-list"></i></button>
								</div>
							</div>
							<div class="col-22">
								<input type="text" class="form-control" id="cust_name" data-type="varchar" data-stage="second" placeholder="Customer Name" readonly>
							</div>
						</div>
					</div>
				</div>
				<div class="row row-1">
					<div class="col-1">
						<label for="address" class="control-label">Address</label>
					</div>
					<div class="col-2">
						<div class="row row-2">
							<div class="col-21">
								&nbsp;
							</div>
							<div class="col-22">
								<input type="text" class="form-control" id="address" data-type="varchar" data-stage="second" placeholder="Address" data-action="enable" readonly>
							</div>
						</div>
					</div>
				</div>
				<div class="row row-1">
					<div class="col-1">
						<label for="category" class="control-label">Category</label>
					</div>
					<div class="col-2">
						<div class="row row-2">
							<div class="col-21">
								<div class="btn-group" role="group">
									<button type="button" class="btn btn-primary" id="new-category-data" disabled
										data-toggle="popover"
										data-trigger="hover"
										data-placement="bottom"
										data-container="body"
										data-html="true"
										title='<i class="fa fa-plus"></i> <strong>New Category Data</strong>'
										data-content="Click to create new category data for Second Weighing."><i class="fa fa-plus"></i></button>
									<button type="button" class="btn btn-primary" id="search-category-data" disabled
										data-toggle="popover"
										data-trigger="hover"
										data-placement="bottom"
										data-container="body"
										data-html="true"
										title='<i class="fa fa-list"></i> <strong>Category Data Lookup</strong>'
										data-content="Click to list all category data that are available for Second Weighing."><i class="fa fa-list"></i></button>
								</div>
							</div>
							<div class="col-22">
								<input type="text" class="form-control" id="cat_name" data-type="varchar" data-stage="second" placeholder="Category Name" readonly>
							</div>
						</div>
					</div>
				</div>
				<div class="row row-1">
					<div class="col-1">
						<label for="product" class="control-label">Product</label>
					</div>
					<div class="col-2">
						<div class="row row-2">
							<div class="col-21">
								<div class="btn-group" role="group">
									<button type="button" class="btn btn-primary" id="new-product-data" disabled
										data-toggle="popover"
										data-trigger="hover"
										data-placement="bottom"
										data-container="body"
										data-html="true"
										title='<i class="fa fa-plus"></i> <strong>New Product Data</strong>'
										data-content="Click to create new product data for Second Weighing. This will be tagged automatically to the selected customer data."><i class="fa fa-plus"></i></button>
									<button type="button" class="btn btn-primary" id="search-product-data" disabled
										data-toggle="popover"
										data-trigger="hover"
										data-placement="bottom"
										data-container="body"
										data-html="true"
										title='<i class="fa fa-list"></i> <strong>Product Data Lookup</strong>'
										data-content="Click to list all product data that are available or tagged to the selected customer data."><i class="fa fa-list"></i></button>
								</div>
							</div>
							<div class="col-22">
								<input type="text" class="form-control" id="prod_name" data-type="varchar" data-stage="second" placeholder="Product Name" readonly>
							</div>
						</div>
					</div>
				</div>
				<hr/>
				<div class="row row-1">
					<div class="col-1">
						<label for="product" class="control-label">Weight In</label>
					</div>
					<div class="col-2">
						<div class="row row-3">
							<div class="col-21">
								<div class="btn-group" role="group">
									<button class="btn btn-primary" type="button" id="add-weight-in">
										<span class="fa fa-plus-circle"></span>
									</button>
									<button class="btn btn-danger" type="button" id="del-weight-in" disabled>
										<span class="fa fa-minus-circle"></span>
									</button>
								</div>
							</div>
							<div class="col-22">
								<table class="display compact nowrap" id="dtWeightIn" style="width: 100%">
									<thead>
										<tr>
											<th class="text-left" width="45%">Time</th>
											<th class="text-left" width="35%"><div style="margin-left: -9px;">Reading</div></th>
											<th class="text-left" width="20%"><div style="margin-left: -18px;">Unit</div></th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td class="text-left">08/03/2016 10:00 AM</td>
											<td class="text-left">1,000</td>
											<td class="text-left">kg</td>
										</tr>
										<tr>
											<td class="text-left">08/03/2016 10:00 AM</td>
											<td class="text-left">1,000</td>
											<td class="text-left">kg</td>
										</tr>
										<tr>
											<td class="text-left">08/03/2016 10:00 AM</td>
											<td class="text-left">1,000</td>
											<td class="text-left">kg</td>
										</tr>
										<tr>
											<td class="text-left">08/03/2016 10:00 AM</td>
											<td class="text-left">1,000</td>
											<td class="text-left">kg</td>
										</tr>
									</tbody>
								</table>
								<div class="weight-in-total">
									<strong>Total Weight In:</strong> 10,000 kg
								</div>
							</div>
						</div>
					</div>
				</div>
				<hr/>
				<div class="row row-3">
					<div class="col-1">
						<label for="weight_out_reading" class="control-label">Weight Out</label>
					</div>
					<div class="col-3">
						<input type="text" class="form-control weight-input" id="weight_out_reading" value="0.00" data-type="float" data-stage="second" readonly
							data-toggle="popover"
							data-trigger="hover"
							data-placement="top"
							data-container="body"
							data-html="true"
							title='<div class="all-middle"><img src="images/numeric-2-box-outline-16.png"> <strong>Truck Out Weight</strong></div>'
							data-content="Weight reading for Second Weighing.">
					</div>
					<div class="col-4">
						<label for="net_weight" class="control-label">Net Weight</label>
					</div>
					<div class="col-5">
						<input type="text" class="form-control weight-input" id="net_weight" value="0.00" data-type="float" data-stage="second" readonly
							data-toggle="popover"
							data-trigger="hover"
							data-placement="top"
							data-container="body"
							data-html="true"
							title='<i class="fa fa-calculator"></i> <strong>Net Weight</strong>'
							data-content="Net Weight = Total Weight In - Weight Out">
					</div>
				</div>
			</div>
			<div class="form-horizontal no-margin-bottom" style="width: 19%; float: right">
				<button id="first-weighing" class="btn btn-success btn-lg btn-block" data-type="button" disabled
					data-toggle="popover"
					data-trigger="hover"
					data-placement="left"
					data-container="body"
					data-html="true"
					title='<div class="all-middle"><img src="images/numeric-1-box-outline-16.png"> <strong>Save Details</strong></div>'
					data-content="Click to save First Weighing details into the system.">
					<img src="images/numeric-1-box-outline.png">
					<p>Save Data</p>
				</button>
				<button id="second-weighing" class="btn btn-warning btn-lg btn-block" data-type="button" disabled
					data-toggle="popover"
					data-trigger="hover"
					data-placement="left"
					data-container="body"
					data-html="true"
					title='<div class="all-middle"><img src="images/numeric-2-box-outline-16.png"> <strong>Complete Transaction</strong></div>'
					data-content="Click to save Second Weighing details into the system.">
					<img src="images/numeric-2-box-outline.png">
					<p>Complete Transaction</p>
				</button>
				<button id="cancel-weighing" class="btn btn-danger btn-lg btn-block" data-type="button" disabled
					data-toggle="popover"
					data-trigger="hover"
					data-placement="left"
					data-container="body"
					data-html="true"
					title='<i class="fa fa-ban"></i> <strong>Cancel</strong>'
					data-content="Click to clear and reset the Weighing Scale form.">
					<i class="fa fa-ban fa-3x" style="margin-top: 5px"></i>
					<p>Cancel</p>
				</button>
				<button id="reprint-docket" class="btn btn-info btn-lg btn-block" data-type="button" disabled
					data-toggle="popover"
					data-trigger="hover"
					data-placement="left"
					data-container="body"
					data-html="true"
					title='<i class="glyphicon glyphicon-print"></i> <strong>Reprint Docket</strong>'
					data-content="Click to reprint docket details for First Weighing.">
					<i class="glyphicon glyphicon-print fa-3x" style="margin-top: 3px"></i>
					<p>Reprint Docket</p>
				</button>
			</div>
		</div>
	</div>
</div>
<input type="hidden" data-stage="second" id="wr_id">
<input type="hidden" data-stage="second" id="cust_id">
<input type="hidden" data-stage="second" id="cat_id">
<input type="hidden" data-stage="second" id="prod_id">
<input type="hidden" data-stage="second" id="docket_no">
<div class="modal fade bootstrap-dialog type-primary" id="truck-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-list"></i> Truck Data Lookup
			</div>
			<div class="modal-body">
				<ul class="nav nav-tabs" role="tablist" style="margin-bottom: 15px;" id="tabSelectTruck">
					<li role="presentation" class="active">
						<a href="#firstWeighing" aria-controls="firstWeighing" role="tab" data-toggle="tab">
							<div class="all-middle"><img src="images/numeric-1-box-outline-18.png"> First Weighing</div>
						</a>
					</li>
					<li role="presentation">
						<a href="#secondWeighing" aria-controls="secondWeighing" role="tab" data-toggle="tab">
							<div class="all-middle"><img src="images/numeric-2-box-outline-18.png"> Second Weighing</div>
						</a>
					</li>
				</ul>
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="firstWeighing">
						<div class="alert alert-info" role="alert">
							<i class="fa fa-info-circle fa-3x fa-pull-left"></i>
							<ul>
								<li><i class="fa fa-check-square-o"></i> Records listed here are Truck Data available for First Weighing only.</li>
								<li><i class="fa fa-check-square-o"></i> To create new Truck Data for First Weighing, use the Truck Scale form.</li>
							</ul>
						</div>
						<div class="panel panel-default no-margin-bottom">
							<div class="panel-body">
								<table class="display compact nowrap" id="table-truck-first" style="width: 100%">
									<thead>
										<tr>
											<th class="text-left">Truck ID</th>
											<th class="text-left">Truck Code</th>
											<th class="text-left">Date Modified</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary" id="btnFWTrucksOK" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-default btnFWTrucksCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="secondWeighing">
						<div class="alert alert-info" role="alert">
							<i class="fa fa-info-circle fa-3x fa-pull-left"></i>
							<ul>
								<li><i class="fa fa-check-square-o"></i> Records listed here are Truck Data available for Second Weighing only.</li>
								<li><i class="fa fa-check-square-o"></i> To remove Truck Data from Second Weighing, go to the Pending Items page.</li>
							</ul>
						</div>
						<div class="panel panel-default no-margin-bottom">
							<div class="panel-body">
								<table class="display compact nowrap" id="table-truck-second" style="width: 100%">
									<thead>
										<tr>
											<th class="text-left">ID</th>
											<th class="text-left">Truck Code</th>
											<th class="text-left">Date In</th>
											<th class="text-left">Time In</th>
											<th class="text-left">Weight In</th>
											<th class="text-left">Unit</th>
											<th class="text-left">User</th>
											<th class="text-left">Docket No.</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary" id="btnSWTrucksOK" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-default btnSWTrucksCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="customer-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-list"></i> Customer Data Lookup
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<i class="fa fa-info-circle fa-3x fa-pull-left"></i>
					<ul>
						<li><i class="fa fa-check-square-o"></i> Records listed here are Customer Data that are available in the system.</li>
						<li><i class="fa fa-check-square-o"></i> To create new Customer Data, use the Truck Scale form.</li>
					</ul>
				</div>
				<div class="panel panel-default no-margin-bottom">
					<div class="panel-body">
						<table class="display compact nowrap" id="table-customer-data" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">Customer ID</th>
									<th class="text-left">Customer Code</th>
									<th class="text-left">Customer Name</th>
									<th class="text-left">Date Modified</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
				<button type="button" class="btn btn-primary" id="select-item" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="category-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-list"></i> Category Data Lookup
			</div>
			<div class="modal-body">
				<div class="alert alert-info" role="alert">
					<i class="fa fa-info-circle fa-3x fa-pull-left"></i>
					<ul>
						<li><i class="fa fa-check-square-o"></i> Records listed here are Category Data that are available in the system.</li>
						<li><i class="fa fa-check-square-o"></i> To create new Category Data, use the Truck Scale form.</li>
					</ul>
				</div>
				<div class="panel panel-default no-margin-bottom">
					<div class="panel-body">
						<table class="display compact nowrap" id="table-category-data" style="width: 100%">
							<thead>
								<tr>
									<th class="text-left">Category ID</th>
									<th class="text-left">Category Code</th>
									<th class="text-left">Category Name</th>
									<th class="text-left">Date Modified</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left: 0px;"><i class="fa fa-ban"></i> Cancel</button>
				<button type="button" class="btn btn-primary" id="select-item" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade bootstrap-dialog type-primary" id="product-data-modal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header" style="color: #FFFFFF">
				<i class="fa fa-list"></i> Product Data Lookup
			</div>
			<div class="modal-body">
				<ul class="nav nav-tabs" role="tablist" style="margin-bottom: 15px;" id="tabSelectProduct">
					<li role="presentation" class="active">
						<a href="#products" aria-controls="products" role="tab" data-toggle="tab">
							<i class="fa fa-product-hunt"></i> Products
						</a>
					</li>
					<li role="presentation">
						<a href="#customerProducts" aria-controls="customerProducts" role="tab" data-toggle="tab">
							<i class="fa fa-plus-circle"></i> Customer Products
						</a>
					</li>
				</ul>
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="products">
						<div class="alert alert-info" role="alert">
							<i class="fa fa-info-circle fa-3x fa-pull-left"></i>
							<ul>
								<li><i class="fa fa-check-square-o"></i> Records listed here are Product Data that are not yet tagged to the selected Customer Data.</li>
								<li><i class="fa fa-check-square-o"></i> To create new Product Data, use the Truck Scale form.</li>
							</ul>
						</div>
						<div class="panel panel-default no-margin-bottom">
							<div class="panel-body">
								<table class="display compact nowrap" id="table-product-data-all" style="width: 100%">
									<thead>
										<tr>
											<th class="text-left">Product ID</th>
											<th class="text-left">Product Code</th>
											<th class="text-left">Product Name</th>
											<th class="text-left">Category Name</th>
											<th class="text-left">Date Modified</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary" id="btnAllProdOK" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-default btnAllProdCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane" id="customerProducts">
						<div class="alert alert-info" role="alert">
							<i class="fa fa-info-circle fa-3x fa-pull-left"></i>
							<ul>
								<li><i class="fa fa-check-square-o"></i> Records listed here are Product Data that are tagged to the selected Customer Data.</li>
								<li><i class="fa fa-check-square-o"></i> To tag other Product Data to the selected Customer Data, go to the Products Data page.</li>
							</ul>
						</div>
						<div class="panel panel-default no-margin-bottom">
							<div class="panel-body">
								<table class="display compact nowrap" id="table-product-data" style="width: 100%">
									<thead>
										<tr>
											<th class="text-left">CP ID</th>
											<th class="text-left">Customer ID</th>
											<th class="text-left">Product ID</th>
											<th class="text-left">Product Code</th>
											<th class="text-left">Product Name</th>
											<th class="text-left">Category Name</th>
											<th class="text-left">Date Modified</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<hr style="margin-top: 20px; margin-bottom: 15px; border-color: #DDDDDD;">
						<div class="btn-toolbar" role="toolbar" aria-label="button groups" style="margin-bottom: 5px;">
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-primary" id="btnCustProdOK" disabled><i class="fa fa-check-square-o"></i> Select Item</button>
							</div>
							<div class="btn-group pull-right" role="group" style="margin-bottom: 0px;">
								<button type="button" class="btn btn-default btnCustProdCancel"><i class="fa fa-ban"></i> Cancel</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript" src="js/stic-weight-scale.js"></script>
<script>
	$(function() {
		// Initialize DT variables
		var dtFWT, dtSWT, dtCDP, dtPDP, dtAPDP;

		// Load user based on cookie
		$('#user_name').val(STIC.User.ReadCookie('username'));

		// Initialize Popovers
		$('[data-toggle="popover"]').popover();
		toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });

		// DT Weight In Details
		var dtWID = $('#dtWeightIn')
			.DataTable({
				paging: false,
				ordering: false,
				scrollY: '90px',
				scrollCollapse: false,
				dom: 'rt'
			});
			
		////////////////////////////////////////
			columns: dtCd,
			ajax: {
					url: dtWs,
					dataSrc: function(json) {
						var ds = dtDs.split('.'),
							rec = json[ds[0]][ds[1]][ds[2]];
						return ($.isArray(rec) === true ? rec : (rec !== '' ? [rec] : []));
					}
				}	
		////////////////////////////////////
				
		
					
		// Weight In Details > DT Row Click Event
		$('#dtWeightIn tbody').on('click', 'tr', function() {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtWID,
				pid: 'prod_id',
				buttons: ['#del-weight-in']
			});
		});
		
		// Form Content
		var frmAddWeightIn = $('<div></div>').load(FRM_ADD_WEIGHT_IN);
			
		// Add Weight In
		$('#add-weight-in').on('click', function() {
			BootstrapDialog.show({
				closable: false,
				title: '<i class="fa fa-sign-in"></i> Add Weight In',
				message: frmAddWeightIn,
				onshown: function(dialogRef) {
					var modalBody = dialogRef.getModalBody();
					modalBody.find('input[data-field]').val('');
				},
				buttons: [{
					label: 'Cancel',
					icon: 'fa fa-ban',
					cssClass: 'btn-default',
					action: function(dialogRef) {
						BootstrapDialog.closeAll();
					}
				}, {
					label: 'Save Scale Reading',
					icon: 'fa fa-floppy-o',
					cssClass: 'btn-primary',
					action: function(dialogRef) {
						var modalBody = dialogRef.getModalBody(),							
							weightUnit = modalBody
								.find('.weight-unit')
								.text()
								.replace(/\+/g, '')
								.replace(/\,/g, ''),							
							weightReading = modalBody
								.find('.weight-reading')
								.text()
								.replace(/\+/g, '')
								.replace(/\,/g, ''),							
							currDateTime = $.formatDateTime('yy-mm-dd hh:ii:ss', new Date()),
							JSONObject = {								
								weight_unit: weightUnit,											
								date_modified: currDateTime,
								weight_in_date: currDateTime,
								weight_in_reading: weightReading,			
								user_id: STIC.User.ReadCookie('userid')
							};							
						console.log(JSONObject);
						// Call WS to insert weight in details
						// Reload Weight In Details DT
					}
				}]
			});
		});
		
		// Delete Weight In
		$('#del-weight-in').on('click', function() {		
			if (STIC.User.allowDelete()) {
				BootstrapDialog.confirm({
					type: 'type-danger',					
					title: MSG_TITLE_INFO,
					btnCancelLabel: BTN_LABEL_CANCEL,
					message: MSG_CONFIRM_DELETE_RECORD,
					btnOKLabel: BTN_LABEL_CONFIRM_DELETE,
					callback: function(result) {
						if (result) {
							// Call WS
							STIC.postData({
								dt: dtWID,
								title: MSG_TITLE_INFO,
								message: MSG_INFO_DEL_REC,
								url: WS_DELETE_WEIGHT_DETAIL,
								data: {
									wr_dtlid: dtWID
										.row('.selected')
										.data()['wr_dtlid']
								}								
							});
						}
					}
				});
			}
		});

		/**********************************************************************************************************************************************/

		// Truck > New Truck Data
		$('#new-truck-data').on('click', function() {
			showNewModalForm({
				objectId: 'truckInfo',
				dataType: 'Truck Data',
				status: 'FIRST_WEIGHT_IN',
				formId: '#dataTruckForm',
				formSrc: FORM_TRUCK_DATA,
				wsInsert: WS_TRUCK_INSERT
			});
		});

		// Truck > Data Lookup
		$('#search-truck-data').on('click', function() {
			if ($.fn.DataTable.isDataTable('#table-truck-first')) {
				dtFWT.destroy();
			}
			if ($.fn.DataTable.isDataTable('#table-truck-second')) {
				dtSWT.destroy();
			}
			dtFWT = initDT_Picker({
				pl: DFLT_PICK_SIZE,
				ds: DS_TRUCK_LIST,
				cd: CD_TRUCK_LIST,
				ws: WS_TRUCK_LIST,
				domId: 'table-truck-first'
			});
			dtSWT = initDT_Picker({
				pl: DFLT_PICK_SIZE,
				ds: DFLT_DS,
				cd: CD_TRUCK_IN_LIST,
				ws: WS_CHECK_TRUCK_CODE_LIST,
				domId: 'table-truck-second'
			});
			$('#truck-data-modal').modal('show');
		});

		// Truck > Data Lookup > onShow Event
		$('#truck-data-modal').on('shown.bs.modal', function() {
			$('#btnFWTrucksOK, #btnSWTrucksOK').prop('disabled', true);
			$('#tabSelectTruck a[href="#firstWeighing"]').tab('show');
		})

		// Truck > Data Lookup > First Weighing Tab Click Event
		$('#tabSelectTruck a[href="#firstWeighing"]').on('click', function() {
			dtFWT.ajax.reload();
			$('#btnFWTrucksOK').prop('disabled', true);
		});

		// Truck > Data Lookup > Second Weighing Tab Click Event
		$('#tabSelectTruck a[href="#secondWeighing"]').on('click', function() {
			dtSWT.ajax.reload();
			$('#btnSWTrucksOK').prop('disabled', true);
		});

		// Truck > Data Lookup > First Weighing Trucks > DT Row Click Event
		$('#table-truck-first tbody').on( 'click', 'tr', function() {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtFWT,
				pid: 'truck_id',
				buttons: ['#btnFWTrucksOK']
			});
		});

		// Truck > Data Lookup > Second Weighing Trucks > DT Row Click Event
		$('#table-truck-second tbody').on( 'click', 'tr', function() {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtSWT,
				pid: 'truck_id',
				buttons: ['#btnSWTrucksOK']
			});
		});

		// Truck > Data Lookup > First Weighing Trucks > Select Item
		$('#truck-data-modal #btnFWTrucksOK').on('click', function() {
			toggleWeightScaleFields({ status: 'FIRST_WEIGHT_IN' });
			$('#truck_code').val(dtFWT.row('.selected').data().truck_code);
			$('#truck-data-modal').modal('hide');
			setNetWeight();
		});

		// Truck > Data Lookup > Second Weighing Trucks > Select Item
		$('#truck-data-modal #btnSWTrucksOK').on('click', function() {
			var selected_row = dtSWT.row('.selected');
			toggleWeightScaleFields({ status: 'SECOND_WEIGHT_IN' });
			$('#wr_id').val(selected_row.data().wr_id);
			$('#docket_no').val(selected_row.data().docket_no);
			$('#truck_code').val(selected_row.data().truck_code);
			//$('#weight_unit').text(selected_row.data().weight_unit);
			//$('#weight_in_reading').val(selected_row.data().weight_in_reading
			//	.replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
			$('#weight_in_reading').val(selected_row.data().weight_in_reading);
			$('#truck-data-modal').modal('hide');
			setNetWeight();
		});

		// Truck > Data Lookup > Cancel
		$('.btnFWTrucksCancel, .btnSWTrucksCancel').on('click', function() {
			$('#truck-data-modal').modal('hide');
			$('#btnFWTrucksOK, #btnSWTrucksOK').prop('disabled', true);
		});

		/**********************************************************************************************************************************************/

		// Customer > New Customer Data
		$('#new-customer-data').on('click', function() {
			if ($('#truck_code').val() != '') {
				showNewModalForm({
					objectId: 'custInfo',
					dataType: 'Customer Data',
					status: 'SECOND_WEIGHT_IN',
					formId: '#dataCustomerForm',
					formSrc: FORM_CUSTOMER_DATA,
					wsInsert: WS_CUSTOMER_INSERT
				});
			} else {
				showErrorStyles(['truck_code']);
				BootstrapDialog.alert({
					type: 'type-danger',
					title: MSG_TITLE_INFO,
					message: MSG_TRUCK_DATA_EMPTY,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Customer > Data Lookup
		$('#search-customer-data').on('click', function() {
			if ($('#truck_code').val() != '') {
				if ($.fn.DataTable.isDataTable('#table-customer-data')) {
					dtCDP.destroy();
				}
				dtCDP = initDT_Picker({
					pl: DFLT_PICK_SIZE,
					ds: DS_CUSTOMER_LIST,
					cd: CD_CUSTOMER_LIST,
					ws: WS_CUSTOMER_LIST,
					domId: 'table-customer-data'
				});
				$('#customer-data-modal').modal('show');
			} else {
				showErrorStyles(['truck_code']);
				BootstrapDialog.alert({
					type: 'type-danger',
					title: MSG_TITLE_INFO,
					message: MSG_TRUCK_DATA_EMPTY,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Customer > Data Lookup > DT Row Click Event
		$('#table-customer-data tbody').on( 'click', 'tr', function() {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtCDP,
				pid: 'cust_id',
				buttons: ['#customer-data-modal #select-item']
			});
		});

		// Customer > Data Lookup > Select Item
		$('#customer-data-modal #select-item').on('click', function() {
			clearErrorStyles(['cust_code', 'cust_name']);
			var selected_row = dtCDP.row('.selected');
			$('#cust_id').val(selected_row.data().cust_id);
			$('#cust_name').val(selected_row.data().cust_name);
			$('#customer-data-modal').modal('hide');
		});

		/**********************************************************************************************************************************************/

		// Category > New Category Data
		$('#new-category-data').on('click', function() {
			if ($('#cust_id').val() != '') {
				showNewModalForm({
					objectId: 'cateInfo',
					dataType: 'Category Data',
					status: 'SECOND_WEIGHT_IN',
					formId: '#dataCategoryForm',
					formSrc: FORM_CATEGORY_DATA,
					wsInsert: WS_CATEGORY_INSERT
				});
			} else {
				BootstrapDialog.alert({
					type: 'type-danger',
					title: MSG_TITLE_INFO,
					message: MSG_CUSTOMER_DATA_EMPTY,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Category > Data Lookup
		$('#search-category-data').on('click', function() {
			if ($('#cust_id').val() != '') {
				if ($.fn.DataTable.isDataTable('#table-category-data')) {
					dtCDP.destroy();
				}
				dtCDP = initDT_Picker({
					pl: DFLT_PICK_SIZE,
					ds: DS_CATEGORY_LIST,
					cd: CD_CATEGORY_LIST,
					ws: WS_CATEGORY_LIST,
					domId: 'table-category-data'
				});
				$('#category-data-modal').modal('show');
			} else {
				BootstrapDialog.alert({
					type: 'type-danger',
					title: MSG_TITLE_INFO,
					message: MSG_CUSTOMER_DATA_EMPTY,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Category > Data Lookup > DT Row Click Event
		$('#table-category-data tbody').on('click', 'tr', function() {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtCDP,
				pid: 'cat_id',
				buttons: ['#category-data-modal #select-item']
			});
		});

		// Category > Data Lookup > Select Item
		$('#category-data-modal #select-item').on('click', function() {
			$('#prod_id').val('');
			$('#prod_name').val('');
			clearErrorStyles(['cat_code', 'cat_name']);
			var selected_row = dtCDP.row('.selected');
			$('#cat_id').val(selected_row.data().cat_id);
			$('#cat_name').val(selected_row.data().cat_name);
			$('#category-data-modal').modal('hide');
		});

		/**********************************************************************************************************************************************/

		// Product > New Product Data
		$('#new-product-data').on('click', function() {
			if ($('#cat_id').val() != '') {
				showNewModalForm({
					objectId: 'prodInfo',
					dataType: 'Product Data',
					status: 'SECOND_WEIGHT_IN',
					formId: '#dataProductForm',
					formSrc: FORM_CUST_PRODUCT_DATA,
					wsInsert: WS_CUST_PRODUCT_INSERT,
					data: { cust_id: $('#cust_id').val(), cat_id: $('#cat_id').val() }
				});
			} else {
				showErrorStyles(['cust_code', 'cust_name']);
				BootstrapDialog.alert({
					type: 'type-danger',
					title: MSG_TITLE_INFO,
					message: MSG_CATEGORY_DATA_EMPTY,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Product > Data Lookup
		$('#search-product-data').on('click', function() {
			if ($('#cat_id').val() != '') {
				if ($.fn.DataTable.isDataTable('#table-product-data')) {
					dtPDP.destroy();
				}
				if ($.fn.DataTable.isDataTable('#table-product-data-all')) {
					dtAPDP.destroy();
				}
				dtPDP = initDT_Picker({
					pl: DFLT_PICK_SIZE,
					ds: DS_CUSTPROD_LIST,
					cd: CD_CUSTPROD_LIST,
					domId: 'table-product-data',
					ws: WS_CUSTPROD_LIST + 'cust_id=' +  $('#cust_id').val() + '&cat_id=' +  $('#cat_id').val()
				});
				dtAPDP = initDT_Picker({
					pl: DFLT_PICK_SIZE,
					ds: DS_PRODUCT_LIST,
					cd: CD_PRODUCT_LIST,
					domId: 'table-product-data-all',
					ws: WS_PRODUCT_LIST + 'cust_id=' +  $('#cust_id').val() + '&cat_id=' +  $('#cat_id').val()
				});
				$('#product-data-modal').modal('show');
			} else {
				showErrorStyles(['cust_code', 'cust_name']);
				BootstrapDialog.alert({
					type: 'type-danger',
					title: MSG_TITLE_INFO,
					message: MSG_CATEGORY_DATA_EMPTY,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});
			}
		});

		// Product > Data Lookup > onShow Event
		$('#product-data-modal').on('shown.bs.modal', function() {
			$('#btnAllProdOK, #btnCustProdOK').prop('disabled', true);
			$('#tabSelectProduct a[href="#products"]').tab('show');
		})

		// Product > Data Lookup > All Products Click Event
		$('#tabSelectProduct a[href="#products"]').on('click', function() {
			dtAPDP.ajax.reload();
			$('#btnAllProdOK').prop('disabled', true);
		});

		// Product > Data Lookup > Customer Products Click Event
		$('#tabSelectProduct a[href="#customerProducts"]').on('click', function() {
			dtPDP.ajax.reload();
			$('#btnCustProdOK').prop('disabled', true);
		});

		// All Product > Data Lookup > DT Row Click Event
		$('#table-product-data-all tbody').on( 'click', 'tr', function() {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtAPDP,
				pid: 'prod_id',
				buttons: ['#btnAllProdOK']
			});
		});

		// Customer Product > Data Lookup > DT Row Click Event
		$('#table-product-data tbody').on( 'click', 'tr', function() {
			STIC.dtToggleRowSelect({
				row: this,
				table: dtPDP,
				pid: 'prod_id',
				buttons: ['#btnCustProdOK']
			});
		});

		// All Product > Data Lookup > Select Item
		$('#product-data-modal #btnAllProdOK').on('click', function() {
			clearErrorStyles(['prod_code', 'prod_name']);
			var selected_row = dtAPDP.row('.selected');
			$('#prod_id').val(selected_row.data().prod_id);
			$('#prod_name').val(selected_row.data().prod_name);
			$('#product-data-modal').modal('hide');
		});

		// Customer Products > Data Lookup > Select Item
		$('#product-data-modal #btnCustProdOK').on('click', function () {
			clearErrorStyles(['prod_code', 'prod_name']);
			var selected_row = dtPDP.row('.selected');
			$('#prod_id').val(selected_row.data().prod_id);
			$('#prod_name').val(selected_row.data().prod_name);
			$('#product-data-modal').modal('hide');
		});

		// Cancel Data Lookup
		$('.btnAllProdCancel, .btnCustProdCancel').on('click', function() {
			$('#product-data-modal').modal('hide');
			$('#btnAllProdOK, #btnCustProdOK').prop('disabled', true);
		});

		/**********************************************************************************************************************************************/

		// First Weighing Button
		$('#first-weighing').on('click', function() {
			BootstrapDialog.confirm({
				type: 'type-primary',
				title: MSG_TITLE_INFO,
				btnOKLabel: BTN_LABEL_CONFIRM_FW,
				btnCancelLabel: BTN_LABEL_CANCEL,
				message: MSG_CONFIRM_FIRST_WEIGHING,
				callback: function(result) {
					if (result) {
						clearInterval(STIC.INTERVAL_ID);
						$.post(WS_FIRST_WEIGHING_INSERT, 'weightReadingInfo=' +
							JSON.stringify({
								weight_count: 1,
								weight_status: 'PENDING',
								truck_code: $('#truck_code').val(),
								weight_unit: $('#weight-unit').text(),
								user_id: STIC.User.ReadCookie('userid'),
								date_modified: $.formatDateTime('yy-mm-dd hh:ii:ss', new Date()),
								weight_in_date: $.formatDateTime('yy-mm-dd hh:ii:ss', new Date()),
								weight_in_reading: $('#weight_in_reading').val().replace(/,/g, '')
							}))
							.done(function(result) {
								if (result.response.type === 'SUCCESS') {
									STIC.readScale();
									BootstrapDialog.alert({
										type: 'type-primary',
										title: MSG_TITLE_INFO,
										message: MSG_FIRST_WEIGHING_SUCCESS,
										callback: function() {
											BootstrapDialog.closeAll();
											// Docket Print
											window.open('http://localhost:8080' + WS_DOCKET_PRINT
												+ 'wrId=' + result.response.wr_id
												+ '&type=A1', 'DocketPrint').focus();
											toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });
										}
									});
								} else {
									STIC.showWSError();
								}
							})
							.fail(function() {
								STIC.showWSError();
							});
					}
				}
			});
		});

		/**********************************************************************************************************************************************/

		// Second Weighing Button
		$('#second-weighing').on('click', function () {
			var totalErrors = 0,
				inputFields = [
					{ code: 'truck_code' },
					{ code: 'cust_code', name: 'cust_name' },
					{ code: 'prod_code', name: 'prod_name' }
				];

			// Check required fields
			/*$.each(inputFields, function(index, input) {
				var errors = 0,
					fieldCode = $('#' + input.code),
					fieldCodeBox = fieldCode.parent('div.btn-group'),
					labelWrapper = $('label[for="' + input.code + '"]').parent('div.btn-group');

				labelWrapper.removeClass('has-error');
				fieldCodeBox.find('span.glyphicon').remove();
				fieldCodeBox.removeClass('has-error has-feedback');

				if (fieldCode.val() === '') {
					errors++;
					fieldCodeBox.addClass('has-error has-feedback');
					fieldCodeBox.append('<span class="glyphicon glyphicon-remove form-control-feedback"></span>');
				}

				if (typeof input.name !== 'undefined') {
					var fieldName = $('#' + input.name),
					fieldNameBox = fieldName.parent('div.btn-group');

					fieldNameBox.find('span.glyphicon').remove();
					fieldNameBox.removeClass('has-error has-feedback');

					if (fieldName.val() === '') {
						errors++;
						fieldNameBox.addClass('has-error has-feedback');
						fieldNameBox.append('<span class="glyphicon glyphicon-remove form-control-feedback"></span>');
					}
				}

				if (errors > 0) {
					totalErrors += errors;
					labelWrapper.addClass('has-error');
				}
			});*/

			// Show alert message if there are errors
			if (totalErrors > 0) {
				BootstrapDialog.alert({
					type: 'type-danger',
					title: MSG_TITLE_INFO,
					message: MSG_WEIGHING_FORM_ERROR,
					callback: function() {
						BootstrapDialog.closeAll();
					}
				});

			// Proceed with update if no errors
			} else {
				BootstrapDialog.confirm({
					type: 'type-primary',
					title: MSG_TITLE_INFO,
					btnOKLabel: BTN_LABEL_CONFIRM_SW,
					btnCancelLabel: BTN_LABEL_CANCEL,
					message: MSG_CONFIRM_SECOND_WEIGHING,
					callback: function(result) {
						if (result) {
							clearInterval(STIC.INTERVAL_ID);
							var JSONObject = {
								weight_count:	2,
								weight_status: 'DONE',
								wr_id: $('#wr_id').val(),
								cust_id: $('#cust_id').val(),
								address: $('#address').val(),
								prod_id: $('#prod_id').val(),
								remarks: $('#remarks').val(),
								weight_unit: $('#weight-unit').text(),
								user_id: STIC.User.ReadCookie('userid'),
								net_weight: $('#net_weight').val().replace(/,/g, ''),
								compensation: $('#compensation').val().replace(/,/g, ''),
								weight_out_reading: $('#weight_out_reading').val().replace(/,/g, ''),
								weight_out_date: $.formatDateTime('yy-mm-dd hh:ii:ss', new Date())
							},
							JSONString = 'weightReadingInfo=' + JSON.stringify(JSONObject);
							var result = $.post(WS_SECOND_WEIGHING_UPDATE, JSONString);
							result.done(function (results) {
								if (results.response.type === 'SUCCESS') {

									STIC.readScale();
									BootstrapDialog.alert({
										type: 'type-primary',
										title: MSG_TITLE_INFO,
										message: MSG_SECOND_WEIGHING_SUCCESS,
										callback: function () {
											BootstrapDialog.closeAll();
											// Docket Print
											window.open('http://localhost:8080' + WS_DOCKET_PRINT
												+ 'wrId=' + $('#wr_id').val()
												+ '&type=A2', 'DocketPrint').focus();
											toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });
										}
									});
								} else {
									STIC.showWSError();
								}
							});
							result.fail(function () {
								STIC.showWSError();
							});
						}
					}
				});
			}
		});

		/**********************************************************************************************************************************************/

		// Reprint Docket Button Click Event
		$('#reprint-docket').on('click', function () {
			// Docket Print
			window.open('http://localhost:8080' + WS_DOCKET_PRINT
				+ 'wrId=' + $('#wr_id').val()
				+ '&type=A1', 'DocketPrint').focus();
		});
	});

	// Set Net Weight
	function setNetWeight() {
		var weightIn = parseFloat($('#weight_in_reading').val().replace(',', '')),
			weightOut = parseFloat($('#weight_out_reading').val().replace(',', '')),
			compensation = parseFloat($('#compensation').val()) / 100,
			netWeight = (weightIn > weightOut ?
				(weightIn - weightOut) :
				(weightOut - weightIn)),
			finalNetWeight = netWeight - (netWeight * compensation);
		$('#net_weight').val(finalNetWeight.toFixed(2)
			.replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
	}

	//  Scale Reader
	$(document).ready(function() {
		// Compensation onKeyDown
		$('#compensation').on('keydown', function(e) {
			var self = this;
			setTimeout(function() {
				var oldVal = $(self).val().replace(/[^\d\.]/g, ''),
					oldVal = oldVal != '' ? parseFloat(oldVal).toFixed(2) : '0.00',
					newVal = (oldVal) > 100 ? '100.00' : oldVal;
				$(self).val(newVal);
				setNetWeight();
			}, 0);
		});

		/**********************************************************************************************************************************************/

		// Sample Indicator		
		var random = function(max, min) {
				return ((Math.random() * (max - min)) + min).toFixed(2);
		};

		STIC.INTERVAL_ID = setInterval(function() {
			var rand = '+' + random(50, 950)
				.replace(/(\d)(?=(\d{3})+\.)/g, '$1,');
				
			$('.weight-lcd .weight-error').hide();
			$('div.weight-reading').text(rand.toString());
			
			// 2nd Weighing
			/*if ($('#wr_id').val() != '') {
				$('#weight-reading').text(rand.toString());
				$('#weight_out_reading').val(rand.replace('+', ''));
				setNetWeight();
				setTotalPrice();

			// 1st Weighing
			} else if ($('#truck_code').val() != '') {
				$('#weight-reading').text(rand.toString());
				$('#weight_in_reading').val(rand.replace('+', ''));
			}*/
		}, 5000);

		/**********************************************************************************************************************************************/

		// Read Scale Reader
		//STIC.openScaleReader(function(response) {
			//if (response.type === 'SUCCESS') {
				//STIC.readScale();
			//} else {
				//$('.weight-lcd .weight-error').show();
			//}
		//});

		/**********************************************************************************************************************************************/

		// Cancel Weighing Button Click Event
		$('#cancel-weighing').on('click', function() {
			toggleWeightScaleFields({ status: 'CANCEL_WEIGHT_IN' });
		});

	});
</script>